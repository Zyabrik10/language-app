let e,t,r,n,i,s;var o,a,l,h,u,c,d,f,p,g,m,y,v,w,b,E,T,_,I,C=globalThis;class S{constructor(e){this.storageName=e}getItem(e){let t=localStorage.getItem(this.storageName);return!t&&e&&this.setItem(e),null===t?null:JSON.parse(t)}setItem(e){localStorage.setItem(this.storageName,JSON.stringify(e))}}class x{constructor(e,t="favorite"){this.types=["favorite"],this.types_expression=[t],this.d=e.map(e=>(this.hasType(e.type)||(this.types.push(e.type),this.types_expression.push(e.type_expression)),{...e,favorite:!1}))}setFavoriteById(e,t){let r=this.getById(e);r&&(r.favorite=t)}setFavorites(e,...t){t.forEach(t=>{this.setFavoriteById(t,e)})}getFavorites(e=this.d,t=!0){return e.filter(({favorite:e})=>t===e)}getById(e,t=this.d){return t.find(({id:t})=>t===e)}hasType(e){return!!this.types.find(t=>t===e)}getWordsByType(e,t=this.d){return this.hasType(e)?t.filter(({type:t})=>t===e):[]}getWordsByTypes(e=this.d,...t){let r=[];return t.forEach(t=>{let n=this.getWordsByType(t,e);0!==n.length&&r.push(...n)}),r}getWordsByPart(e,t=this.d){if(!e)return[...t];let r=[];return t.forEach(t=>{t.expression.toLowerCase().includes(e.toLowerCase())&&r.push(t)}),r}getSorted(e=this.d.map(e=>e),t=!0){return e.sort((e,r)=>t?e.expression.localeCompare(r.expression):r.expression.localeCompare(e.expression)),e}add({word:e,translate:t,type:r,description:n}){return this.hasType(r)||this.types.push(r),this.d.push({id:String(this.d.length),word:e,translate:t,type:r,description:n}),this}removeById(e){return this.d=this.d.filter(({id:t})=>e!==t),this}}class A{constructor(e,t){if(this.mw=document.querySelector(e),!this.mw)throw Error(`No ${e} element was found`);if(this.closeModalWindowButton=this.mw.querySelector(t),!this.closeModalWindowButton)throw Error(`No ${t} element was found`);if(this.closeModalWindowButton.addEventListener("click",this.hideModalWindow.bind(this,()=>{})),!this.mw.querySelector(".content"))throw Error("No .content inside modal was found");this.mw.addEventListener("mousedown",({target:e,currentTarget:t})=>{e===t&&this.hideModalWindow()}),this.hideModalWindowOnEscapeEnv=this.hideModalWindowOnEscape.bind(this)}3;hideModalWindow(e=()=>{}){this.mw.classList.remove("active"),window.removeEventListener("keydown",this.hideModalWindowOnEscapeEnv),document.documentElement.style.overflow="auto",e()}hideModalWindowOnEscape({key:e}){"Escape"===e&&this.hideModalWindow()}showModalWindow(e=()=>{}){this.mw.classList.add("active"),window.addEventListener("keydown",this.hideModalWindowOnEscapeEnv),document.documentElement.style.overflow="hidden",e()}}const D={},k={},N=()=>void 0,L=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},R=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],o=((7&i)<<18|(63&s)<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else{let s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,h=i>>2,u=(3&i)<<4|o>>4,c=(15&o)<<2|l>>6,d=63&l;!a&&(d=64,s||(c=64)),n.push(r[h],r[u],r[c],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(L(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):R(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,a=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new M;let l=i<<2|s>>4;if(n.push(l),64!==o){let e=s<<4&240|o>>2;if(n.push(e),64!==a){let e=o<<6&192|a;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P=function(e){let t=L(e);return O.encodeByteArray(t,!0)},F=function(e){return P(e).replace(/\./g,"")},V=function(e){try{return O.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},B=()=>(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==C)return C;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,U=()=>{},j=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&V(e[1]);return t&&JSON.parse(t)},q=()=>{try{return N()||B()||U()||j()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},$=e=>{var t,r;return null==(r=null==(t=q())?void 0:t.emulatorHosts)?void 0:r[e]},z=e=>{let t=$(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},H=()=>{var e;return null==(e=q())?void 0:e.config};class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function W(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function K(e){return(await fetch(e,{credentials:"include"})).ok}const Q={};let X=!1;class Y extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J.prototype.create)}}class J{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,n;let i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?(r=o,n=i,r.replace(Z,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Y(s,l,i)}}const Z=/\{\$([^}]+)}/g;function ee(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(et(r)&&et(s)){if(!ee(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function et(e){return null!==e&&"object"==typeof e}class er{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const en="[DEFAULT]";class ei{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new G;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:en})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=en){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=en){return this.instances.has(e)}getOptions(e=en){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===en?void 0:r,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=en){return this.component?this.component.multipleInstances?e:en:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class es{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ei(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const eo=[];(o=a||(a={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";const ea={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},el=a.INFO,eh={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},eu=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=eh[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ec{constructor(e){this.name=e,this._logLevel=el,this._logHandler=eu,this._userLogHandler=null,eo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ea[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}const ed=(e,t)=>t.some(t=>e instanceof t),ef=new WeakMap,ep=new WeakMap,eg=new WeakMap,em=new WeakMap,ey=new WeakMap;let ev={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ep.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eg.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ew(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ew(r){if(r instanceof IDBRequest){let e=new Promise((e,t)=>{let n=()=>{r.removeEventListener("success",i),r.removeEventListener("error",s)},i=()=>{e(ew(r.result)),n()},s=()=>{t(r.error),n()};r.addEventListener("success",i),r.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&ef.set(e,r)}).catch(()=>{}),ey.set(e,r),e}if(em.has(r))return em.get(r);let n=function(r){if("function"==typeof r)return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...e){return r.apply(eb(this),e),ew(ef.get(this))}:function(...e){return ew(r.apply(eb(this),e))}:function(e,...t){let n=r.call(eb(this),e,...t);return eg.set(n,e.sort?e.sort():[e]),ew(n)};return(r instanceof IDBTransaction&&function(e){if(ep.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ep.set(e,t)}(r),ed(r,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,ev):r}(r);return n!==r&&(em.set(r,n),ey.set(n,r)),n}const eb=e=>ey.get(e),eE=["get","getKey","getAll","getAllKeys","count"],eT=["put","add","delete","clear"],e_=new Map;function eI(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(e_.get(t))return e_.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=eT.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||eE.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&s.done]))[0]};return e_.set(t,s),s}ev={...s=ev,get:(e,t,r)=>eI(e,t)||s.get(e,t,r),has:(e,t)=>!!eI(e,t)||s.has(e,t)};class eC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}const eS="@firebase/app",ex="0.13.2",eA=new ec("@firebase/app"),eD="[DEFAULT]",ek={[eS]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eN=new Map,eL=new Map,eR=new Map;function eO(e,t){try{e.container.addComponent(t)}catch(r){eA.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function eM(e){let t=e.name;if(eR.has(t))return eA.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(eR.set(t,e),eN.values()))eO(r,e);for(let t of eL.values())eO(t,e);return!0}const eP=new J("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eF{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eP.create("app-deleted",{appName:this._name})}}function eV(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:eD,automaticDataCollectionEnabled:!0},t),i=n.name;if("string"!=typeof i||!i)throw eP.create("bad-app-name",{appName:String(i)});if(r||(r=H()),!r)throw eP.create("no-options");let s=eN.get(i);if(s)if(ee(r,s.options)&&ee(n,s.config))return s;else throw eP.create("duplicate-app",{appName:i});let o=new es(i);for(let e of eR.values())o.addComponent(e);let a=new eF(r,n,o);return eN.set(i,a),a}function eB(e,t,r){var n;let i=null!=(n=ek[e])?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eA.warn(e.join(" "));return}eM(new er(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const eU="firebase-heartbeat-store";let ej=null;function eq(){return ej||(ej=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let o=indexedDB.open(e,1),a=ew(o);return n&&o.addEventListener("upgradeneeded",e=>{n(ew(o.result),e.oldVersion,e.newVersion,ew(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(eU)}catch(e){console.warn(e)}}}).catch(e=>{throw eP.create("idb-open",{originalErrorMessage:e.message})})),ej}async function e$(e){try{let t=(await eq()).transaction(eU),r=await t.objectStore(eU).get(eH(e));return await t.done,r}catch(e){if(e instanceof Y)eA.warn(e.message);else{let t=eP.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});eA.warn(t.message)}}}async function ez(e,t){try{let r=(await eq()).transaction(eU,"readwrite"),n=r.objectStore(eU);await n.put(t,eH(e)),await r.done}catch(e){if(e instanceof Y)eA.warn(e.message);else{let t=eP.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});eA.warn(t.message)}}}function eH(e){return`${e.name}!${e.options.appId}`}class eG{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new eK(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=eW();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eA.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=eW(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),eQ(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),eQ(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=F(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return eA.warn(e),""}}}function eW(){return new Date().toISOString().substring(0,10)}class eK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await e$(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return ez(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return ez(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function eQ(e){return F(JSON.stringify({version:2,heartbeats:e})).length}eM(new er("platform-logger",e=>new eC(e),"PRIVATE")),eM(new er("heartbeat",e=>new eG(e),"PRIVATE")),eB(eS,ex,""),eB(eS,ex,"esm2017"),eB("fire-js",""),eB("firebase","11.10.0","app");var eX="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==C?C:"undefined"!=typeof self?self:{},eY={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}var t=function(){this.blockSize=-1};function r(){}function n(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^r&(i^s))+n[0]+0xd76aa478|0;o=s+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[1]+0xe8c7b756|0,o=i+(r^(s=t+(o<<12|o>>>20))&(t^r))+n[2]+0x242070db|0,o=r+(t^(i=s+(o<<17|o>>>15))&(s^t))+n[3]+0xc1bdceee|0,o=t+(s^(r=i+(o<<22|o>>>10))&(i^s))+n[4]+0xf57c0faf|0,o=s+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[5]+0x4787c62a|0,o=i+(r^(s=t+(o<<12|o>>>20))&(t^r))+n[6]+0xa8304613|0,o=r+(t^(i=s+(o<<17|o>>>15))&(s^t))+n[7]+0xfd469501|0,o=t+(s^(r=i+(o<<22|o>>>10))&(i^s))+n[8]+0x698098d8|0,o=s+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[9]+0x8b44f7af|0,o=i+(r^(s=t+(o<<12|o>>>20))&(t^r))+n[10]+0xffff5bb1|0,o=r+(t^(i=s+(o<<17|o>>>15))&(s^t))+n[11]+0x895cd7be|0,o=t+(s^(r=i+(o<<22|o>>>10))&(i^s))+n[12]+0x6b901122|0,o=s+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[13]+0xfd987193|0,o=i+(r^(s=t+(o<<12|o>>>20))&(t^r))+n[14]+0xa679438e|0,o=r+(t^(i=s+(o<<17|o>>>15))&(s^t))+n[15]+0x49b40821|0,r=i+(o<<22|o>>>10),o=t+(i^s&(r^i))+n[1]+0xf61e2562|0,t=r+(o<<5|o>>>27),o=s+(r^i&(t^r))+n[6]+0xc040b340|0,s=t+(o<<9|o>>>23),o=i+(t^r&(s^t))+n[11]+0x265e5a51|0,i=s+(o<<14|o>>>18),o=r+(s^t&(i^s))+n[0]+0xe9b6c7aa|0,r=i+(o<<20|o>>>12),o=t+(i^s&(r^i))+n[5]+0xd62f105d|0,t=r+(o<<5|o>>>27),o=s+(r^i&(t^r))+n[10]+0x2441453|0,s=t+(o<<9|o>>>23),o=i+(t^r&(s^t))+n[15]+0xd8a1e681|0,i=s+(o<<14|o>>>18),o=r+(s^t&(i^s))+n[4]+0xe7d3fbc8|0,r=i+(o<<20|o>>>12),o=t+(i^s&(r^i))+n[9]+0x21e1cde6|0,t=r+(o<<5|o>>>27),o=s+(r^i&(t^r))+n[14]+0xc33707d6|0,s=t+(o<<9|o>>>23),o=i+(t^r&(s^t))+n[3]+0xf4d50d87|0,i=s+(o<<14|o>>>18),o=r+(s^t&(i^s))+n[8]+0x455a14ed|0,r=i+(o<<20|o>>>12),o=t+(i^s&(r^i))+n[13]+0xa9e3e905|0,t=r+(o<<5|o>>>27),o=s+(r^i&(t^r))+n[2]+0xfcefa3f8|0,s=t+(o<<9|o>>>23),o=i+(t^r&(s^t))+n[7]+0x676f02d9|0,i=s+(o<<14|o>>>18),o=r+(s^t&(i^s))+n[12]+0x8d2a4c8a|0,o=t+((r=i+(o<<20|o>>>12))^i^s)+n[5]+0xfffa3942|0,o=s+((t=r+(o<<4|o>>>28))^r^i)+n[8]+0x8771f681|0,o=i+((s=t+(o<<11|o>>>21))^t^r)+n[11]+0x6d9d6122|0,o=r+((i=s+(o<<16|o>>>16))^s^t)+n[14]+0xfde5380c|0,o=t+((r=i+(o<<23|o>>>9))^i^s)+n[1]+0xa4beea44|0,o=s+((t=r+(o<<4|o>>>28))^r^i)+n[4]+0x4bdecfa9|0,o=i+((s=t+(o<<11|o>>>21))^t^r)+n[7]+0xf6bb4b60|0,o=r+((i=s+(o<<16|o>>>16))^s^t)+n[10]+0xbebfbc70|0,o=t+((r=i+(o<<23|o>>>9))^i^s)+n[13]+0x289b7ec6|0,o=s+((t=r+(o<<4|o>>>28))^r^i)+n[0]+0xeaa127fa|0,o=i+((s=t+(o<<11|o>>>21))^t^r)+n[3]+0xd4ef3085|0,o=r+((i=s+(o<<16|o>>>16))^s^t)+n[6]+0x4881d05|0,o=t+((r=i+(o<<23|o>>>9))^i^s)+n[9]+0xd9d4d039|0,o=s+((t=r+(o<<4|o>>>28))^r^i)+n[12]+0xe6db99e5|0,o=i+((s=t+(o<<11|o>>>21))^t^r)+n[15]+0x1fa27cf8|0,o=r+((i=s+(o<<16|o>>>16))^s^t)+n[2]+0xc4ac5665|0,r=i+(o<<23|o>>>9),o=t+(i^(r|~s))+n[0]+0xf4292244|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~i))+n[7]+0x432aff97|0,s=t+(o<<10|o>>>22),o=i+(t^(s|~r))+n[14]+0xab9423a7|0,i=s+(o<<15|o>>>17),o=r+(s^(i|~t))+n[5]+0xfc93a039|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~s))+n[12]+0x655b59c3|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~i))+n[3]+0x8f0ccc92|0,s=t+(o<<10|o>>>22),o=i+(t^(s|~r))+n[10]+0xffeff47d|0,i=s+(o<<15|o>>>17),o=r+(s^(i|~t))+n[1]+0x85845dd1|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~s))+n[8]+0x6fa87e4f|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~i))+n[15]+0xfe2ce6e0|0,s=t+(o<<10|o>>>22),o=i+(t^(s|~r))+n[6]+0xa3014314|0,i=s+(o<<15|o>>>17),o=r+(s^(i|~t))+n[13]+0x4e0811a1|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~s))+n[4]+0xf7537e82|0,t=r+(o<<6|o>>>26),o=s+(r^(t|~i))+n[11]+0xbd3af235|0,s=t+(o<<10|o>>>22),o=i+(t^(s|~r))+n[2]+0x2ad7d2bb|0,i=s+(o<<15|o>>>17),o=r+(s^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(o<<21|o>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function i(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)},e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var s,o={};function a(e){var t;return -128<=e&&128>e?(t=function(e){return new i([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(o,e)?o[e]:o[e]=t(e)):new i([0|e],0>e?-1:0)}function u(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(u(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=0x100000000;return new i(t,0)}var c=a(0),d=a(1),f=a(0x1000000);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function m(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new i(r,~e.h).add(d)}function y(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function w(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new w(c,c);if(g(e))return t=b(m(e),t),new w(m(t.g),m(t.h));if(g(t))return t=b(e,m(t)),new w(m(t.g),t.h);if(30<e.g.length){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=d,n=t;0>=n.l(e);)r=E(r),n=E(n);var i=T(r,1),s=T(n,1);for(n=T(n,2),r=T(r,2);!p(n);){var o=s.add(n);0>=o.l(e)&&(i=i.add(r),s=o),n=T(n,1),r=T(r,1)}return t=y(e,i.j(t)),new w(i,t)}for(i=c;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),o=(s=u(r)).j(t);g(o)||0<o.l(e);)r-=n,o=(s=u(r)).j(t);p(s)&&(s=d),i=i.add(s),e=y(e,o)}return new w(i,e)}function E(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.i(n)<<1|e.i(n-1)>>>31;return new i(r,e.h)}function T(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,s=[],o=0;o<n;o++)s[o]=0<t?e.i(o+r)>>>t|e.i(o+r+1)<<32-t:e.i(o+r);return new i(s,e.h)}(s=i.prototype).m=function(){if(g(this))return-m(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},s.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(g(this))return"-"+m(this).toString(e);for(var t=u(Math.pow(e,6)),r=this,n="";;){var i=b(r,t).g,s=((0<(r=y(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(p(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},s.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return g(e=y(this,e))?-1:+!p(e)},s.abs=function(){return g(this)?m(this):this},s.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,s=0;s<=t;s++){var o=n+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);n=a>>>16,o&=65535,a&=65535,r[s]=a<<16|o}return new i(r,-0x80000000&r[r.length-1]?-1:0)},s.j=function(e){if(p(this)||p(e))return c;if(g(this))return g(e)?m(this).j(m(e)):m(m(this).j(e));if(g(e))return m(this.j(m(e)));if(0>this.l(f)&&0>e.l(f))return u(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var s=0;s<e.g.length;s++){var o=this.i(n)>>>16,a=65535&this.i(n),l=e.i(s)>>>16,h=65535&e.i(s);r[2*n+2*s]+=a*h,v(r,2*n+2*s),r[2*n+2*s+1]+=o*h,v(r,2*n+2*s+1),r[2*n+2*s+1]+=a*l,v(r,2*n+2*s+1),r[2*n+2*s+2]+=o*l,v(r,2*n+2*s+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new i(r,0)},s.A=function(e){return b(this,e).h},s.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)&e.i(n);return new i(r,this.h&e.h)},s.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)|e.i(n);return new i(r,this.h|e.h)},s.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)^e.i(n);return new i(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,h=eY.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return m(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=u(Math.pow(r,8)),i=c,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),r);8>o?(o=u(Math.pow(r,o)),i=i.j(o).add(u(a))):i=(i=i.j(n)).add(u(a))}return i},l=eY.Integer=i}).apply(void 0!==eX?eX:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var eJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==C?C:"undefined"!=typeof self?self:{},eZ={};(function(){var e,t,r,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof eJ&&eJ];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var r=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(t=t(s=r[e=e[e.length-1]]))!=s&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",function(e){return e||function(){var e,t,r,n,i;return e=this,t=function(e,t){return t},e instanceof String&&(e+=""),r=0,n=!1,(i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return i},i}});var s=s||{},o=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function h(e,t,r){return e.call.apply(e.bind,arguments)}function v(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function w(e,t,r){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:v).apply(null,arguments)}function b(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function r(){}r.prototype=t.prototype,e.aa=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Qb=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function T(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function _(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(a(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let i=0;i<n;i++)e[t+i]=r[i]}else e.push(r)}}function I(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=o.navigator;return e&&(e=e.userAgent)?e:""}function S(e){return S[" "](e),e}S[" "]=function(){};var x=-1!=C().indexOf("Gecko")&&(-1==C().toLowerCase().indexOf("webkit")||-1!=C().indexOf("Edge"))&&-1==C().indexOf("Trident")&&-1==C().indexOf("MSIE")&&-1==C().indexOf("Edge");function A(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function D(e){let t={};for(let r in e)t[r]=e[r];return t}let k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<k.length;t++)r=k[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}var L=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new R,e=>e.reset());class R{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let O,M=!1,P=new class{constructor(){this.h=this.g=null}add(e,t){let r=L.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},F=()=>{let e=o.Promise.resolve(void 0);O=()=>{e.then(V)}};var V=()=>{let e;for(var t;e=null,P.g&&(e=P.g,P.g=P.g.next,P.g||(P.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){o.setTimeout(()=>{throw e},0)}(e)}L.j(t),100>L.h&&(L.h++,t.next=L.g,L.g=t)}M=!1};function B(){this.s=this.s,this.C=this.C}function U(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},U.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(e){}return e}();function q(e,t){if(U.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(x){e:{try{S(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}E(q,U);var $={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),H=0;function G(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=i,this.key=++H,this.da=this.fa=!1}function W(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function K(e){this.src=e,this.g={},this.h=0}function Q(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=Array.prototype.indexOf.call(i,t,void 0);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(W(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function X(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&!!r==s.capture&&s.ha==n)return i}return -1}K.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=X(e,t,n,i);return -1<o?(t=e[o],r||(t.fa=!1)):((t=new G(t,this.src,s,!!n,i)).fa=r,e.push(t)),t};var Y="closure_lm_"+(1e6*Math.random()|0),J={};function Z(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=l(i)?!!i.capture:!!i,a=en(e);if(a||(e[Y]=a=new K(e)),(r=a.add(t,r,n,o,s)).proxy)return r;if(n=function e(t){return er.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)j||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(et(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ee(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[z])Q(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(et(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=en(t))?(Q(r,e),0==r.h&&(r.src=null,t[Y]=null)):W(e)}}}function et(e){return e in J?J[e]:J[e]="on"+e}function er(e,t){if(e.da)e=!0;else{t=new q(t,this);var r=e.listener,n=e.ha||e.src;e.fa&&ee(e),e=r.call(n,t)}return e}function en(e){return(e=e[Y])instanceof K?e:null}var ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function es(e){return"function"==typeof e?e:(e[ei]||(e[ei]=function(t){return e.handleEvent(t)}),e[ei])}function eo(){B.call(this),this.i=new K(this),this.M=this,this.F=null}function ea(e,t){var r,n=e.F;if(n)for(r=[];n;n=n.F)r.push(n);if(e=e.M,n=t.type||t,"string"==typeof t)t=new U(t,e);else if(t instanceof U)t.target=t.target||e;else{var i=t;N(t=new U(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=el(o,n,!0,t)&&i}if(i=el(o=t.g=e,n,!0,t)&&i,i=el(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=el(o=t.g=r[s],n,!1,t)&&i}function el(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==r){var a=o.listener,l=o.ha||o.src;o.fa&&Q(e.i,o),i=!1!==a.call(l,n)&&i}}return i&&!n.defaultPrevented}function eh(e,t,r){if("function"==typeof e)r&&(e=w(e,r));else if(e&&"function"==typeof e.handleEvent)e=w(e.handleEvent,e);else throw Error("Invalid listener argument");return 0x7fffffff<Number(t)?-1:o.setTimeout(e,t||0)}E(eo,B),eo.prototype[z]=!0,eo.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,s){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);else(i=l(i)?!!i.capture:!!i,n=es(n),t&&t[z])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=X(o=t.g[r],n,i,s))&&(W(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[r],t.h--))):t&&(t=en(t))&&(r=t.g[r.toString()],t=-1,r&&(t=X(r,n,i,s)),(n=-1<t?r[t]:null)&&ee(n))}(this,e,t,r,n)},eo.prototype.N=function(){if(eo.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)W(r[n]);delete t.g[e],t.h--}}this.F=null},eo.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},eo.prototype.L=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class eu extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=eh(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ec(e){B.call(this),this.h=e,this.g={}}E(ec,B);var ed=[];function ef(e){A(e.g,function(e,t){this.g.hasOwnProperty(t)&&ee(e)},e),e.g={}}ec.prototype.N=function(){ec.aa.N.call(this),ef(this)},ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ep=o.JSON.stringify,eg=o.JSON.parse,em=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ey(){}function ev(e){return e.h||(e.h=e.i())}function ew(){}ey.prototype.h=null;var eb={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eE(){U.call(this,"d")}function eT(){U.call(this,"c")}E(eE,U),E(eT,U);var e_={},eI=null;function eC(){return eI=eI||new eo}function eS(e){U.call(this,e_.La,e)}function ex(e){let t=eC();ea(t,new eS(t))}function eA(e,t){U.call(this,e_.STAT_EVENT,e),this.stat=t}function eD(e){let t=eC();ea(t,new eA(t,e))}function ek(e,t){U.call(this,e_.Ma,e),this.size=t}function eN(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function eL(){this.g=!0}function eR(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return ep(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}e_.La="serverreachability",E(eS,U),e_.STAT_EVENT="statevent",E(eA,U),e_.Ma="timingevent",E(ek,U),eL.prototype.xa=function(){this.g=!1},eL.prototype.info=function(){};var eO={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eM={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eP(){}function eF(e,t,r,n){this.j=e,this.i=t,this.l=r,this.R=n||1,this.U=new ec(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eV}function eV(){this.i=null,this.g="",this.h=!1}E(eP,ey),eP.prototype.g=function(){return new XMLHttpRequest},eP.prototype.i=function(){return{}},t=new eP;var eB={},eU={};function ej(e,t,r){e.L=1,e.v=ti(e9(t)),e.m=r,e.P=!0,eq(e,null)}function eq(e,t){e.F=Date.now(),ez(e),e.A=e9(e.v);var r,n,i,s,o,a,h=e.A,u=e.R;Array.isArray(u)||(u=[String(u)]),ty(h.i,"t",u),e.C=0,h=e.j.J,e.h=new eV,e.g=t6(e.j,h?t:null,!e.m),0<e.O&&(e.M=new eu(w(e.Y,e,e.g),e.O)),t=e.U,h=e.g,u=e.ca;var c="readystatechange";Array.isArray(c)||(c&&(ed[0]=c.toString()),c=ed);for(var d=0;d<c.length;d++){var f=function e(t,r,n,i,s){if(i&&i.once)return function e(t,r,n,i,s){if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=es(n),t&&t[z]?t.L(r,n,l(i)?!!i.capture:!!i,s):Z(t,r,n,!0,i,s)}(t,r,n,i,s);if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=es(n),t&&t[z]?t.K(r,n,l(i)?!!i.capture:!!i,s):Z(t,r,n,!1,i,s)}(h,c[d],u||t.handleEvent,!1,t.h||t);if(!f)break;t.g[f.key]=f}t=e.H?D(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ex(),r=e.i,n=e.u,i=e.A,s=e.l,o=e.R,a=e.m,r.info(function(){if(r.g)if(a)for(var e="",t=a.split("&"),l=0;l<t.length;l++){var h=t[l].split("=");if(1<h.length){var u=h[0];h=h[1];var c=u.split("_");e=2<=c.length&&"type"==c[1]?e+(u+"=")+h+"&":e+(u+"=redacted&")}}else e=null;else e=a;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+n+"\n"+i+"\n"+e})}function e$(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function ez(e){e.S=Date.now()+e.I,eH(e,e.I)}function eH(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eN(w(e.ba,e),t)}function eG(e){e.B&&(o.clearTimeout(e.B),e.B=null)}function eW(e){0==e.j.G||e.J||tJ(e.j,e)}function eK(e){eG(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ef(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function eQ(e,t){try{var r=e.j;if(0!=r.G&&(r.g==e||e2(r.h,e))){if(!e.K&&e2(r.h,e)&&3==r.G){try{var n=r.Da.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g)if(r.g.F+3e3<e.F)tY(r),tj(r);else break e;tK(r),eD(18)}}else r.za=i[1],0<r.za-r.T&&37500>i[2]&&r.F&&0==r.v&&!r.C&&(r.C=eN(w(r.Za,r),6e3));if(1>=e1(r.h)&&r.ca){try{r.ca()}catch(e){}r.ca=void 0}}else t0(r,11)}else if((e.K||r.g==e)&&tY(r),!I(t))for(i=r.Da.g.parse(t),t=0;t<i.length;t++){let a=i[t];if(r.T=a[0],a=a[1],2==r.G)if("c"==a[0]){r.K=a[1],r.ia=a[2];let t=a[3];null!=t&&(r.la=t,r.j.info("VER="+r.la));let i=a[4];null!=i&&(r.Aa=i,r.j.info("SVER="+r.Aa));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(r.L=n=1.5*l,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let h=e.g;if(h){let e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(e6(s,s.h),s.h=null))}if(n.D){let e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.ya=e,tn(n.I,n.D,e))}}if(r.G=3,r.l&&r.l.ua(),r.ba&&(r.R=Date.now()-e.F,r.j.info("Handshake RTT: "+r.R+"ms")),(n=r).qa=t2(n,n.J?n.ia:null,n.W),e.K){e3(n.h,e);var o=n.L;o&&(e.I=o),e.B&&(eG(e),ez(e)),n.g=e}else tW(n);0<r.i.length&&t$(r)}else"stop"!=a[0]&&"close"!=a[0]||t0(r,7);else 3==r.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?t0(r,7):tU(r):"noop"!=a[0]&&r.l&&r.l.ta(a),r.v=0)}}ex(4)}catch(e){}}eF.prototype.ca=function(e){e=e.target;let t=this.M;t&&3==tP(e)?t.j():this.Y(e)},eF.prototype.Y=function(e){try{if(e==this.g)e:{let v=tP(this.g);var t=this.g.Ba();let w=this.g.Z();if(!(3>v)&&(3!=v||this.g&&(this.h.h||this.g.oa()||tF(this.g)))){this.J||4!=v||7==t||(8==t||0>=w?ex(3):ex(2)),eG(this);var r=this.g.Z();this.X=r;t:if(e$(this)){var n=tF(this.g);e="";var i=n.length,s=4==tP(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eK(this),eW(this);var a="";break t}this.h.i=new o.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:!(s&&t==i-1)});n.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==r,l=this.i,h=this.u,u=this.A,c=this.l,d=this.R,f=r,l.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+d+"]: "+h+"\n"+u+"\n"+v+" "+f}),this.o){if(this.T&&!this.K){t:{if(this.g){var l,h,u,c,d,f,p,g=this.g;if((p=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(p)){var m=p;break t}}m=null}if(r=m)eR(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eQ(this,r);else{this.o=!1,this.s=3,eD(12),eK(this),eW(this);break e}}if(this.P){let e;for(r=!0;!this.J&&this.C<a.length;)if((e=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?eU:isNaN(r=Number(t.substring(r,n)))?eB:(n+=1)+r>t.length?eU:(t=t.slice(n,n+r),e.C=n+r,t)}(this,a))==eU){4==v&&(this.s=4,eD(14),r=!1),eR(this.i,this.l,null,"[Incomplete Response]");break}else if(e==eB){this.s=4,eD(15),eR(this.i,this.l,a,"[Invalid Chunk]"),r=!1;break}else eR(this.i,this.l,e,null),eQ(this,e);if(e$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=v||0!=a.length||this.h.h||(this.s=1,eD(16),r=!1),this.o=this.o&&r,r){if(0<a.length&&!this.W){this.W=!0;var y=this.j;y.g==this&&y.ba&&!y.M&&(y.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tQ(y),y.M=!0,eD(11))}}else eR(this.i,this.l,a,"[Invalid Chunked Response]"),eK(this),eW(this)}else eR(this.i,this.l,a,null),eQ(this,a);4==v&&eK(this),this.o&&!this.J&&(4==v?tJ(this.j,this):(this.o=!1,ez(this)))}else(function(e){let t={};e=(e.g&&2<=tP(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(I(e[n]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[n]);let i=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let s=t[i]||[];t[i]=s,s.push(r)}var n=function(e){return e.join(", ")};for(let e in t)n.call(void 0,t[e],e,t)})(this.g),400==r&&0<a.indexOf("Unknown SID")?(this.s=3,eD(12)):(this.s=0,eD(13)),eK(this),eW(this)}}}catch(e){}finally{}},eF.prototype.cancel=function(){this.J=!0,eK(this)},eF.prototype.ba=function(){var e,t;this.B=null;let r=Date.now();0<=r-this.S?(e=this.i,t=this.A,e.info(function(){return"TIMEOUT: "+t}),2!=this.L&&(ex(),eD(17)),eK(this),this.s=2,eW(this)):eH(this,this.S-r)};var eX=class{constructor(e,t){this.g=e,this.map=t}};function eY(e){this.l=e||10,e=o.PerformanceNavigationTiming?0<(e=o.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(e){return!!e.h||!!e.g&&e.g.size>=e.j}function e1(e){return e.h?1:e.g?e.g.size:0}function e2(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e6(e,t){e.g?e.g.add(t):e.h=t}function e3(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function e5(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.D);return t}return T(e.i)}function e4(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(a(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(a(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}eY.prototype.cancel=function(){if(this.i=e5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e8=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e7(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof e7){this.h=e.h,te(this,e.j),this.o=e.o,this.g=e.g,tt(this,e.s),this.l=e.l;var t=e.i,r=new tf;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),tr(this,r),this.m=e.m}else e&&(t=String(e).match(e8))?(this.h=!1,te(this,t[1]||"",!0),this.o=ts(t[2]||""),this.g=ts(t[3]||"",!0),tt(this,t[4]),this.l=ts(t[5]||"",!0),tr(this,t[6]||"",!0),this.m=ts(t[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}function e9(e){return new e7(e)}function te(e,t,r){e.j=r?ts(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tt(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function tr(e,t,r){var n,i;t instanceof tf?(e.i=t,n=e.i,(i=e.h)&&!n.j&&(tp(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(tg(this,t),ty(this,r,e))},n)),n.j=i):(r||(t=to(t,tc)),e.i=new tf(t,e.h))}function tn(e,t,r){e.i.set(t,r)}function ti(e){return tn(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function ts(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function to(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,ta),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ta(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}e7.prototype.toString=function(){var e=[],t=this.j;t&&e.push(to(t,tl,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(to(t,tl,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.s)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(to(r,"/"==r.charAt(0)?tu:th,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",to(r,td)),e.join("")};var tl=/[#\/\?@]/g,th=/[#\?:]/g,tu=/[#\?]/g,tc=/[#\?@]/g,td=/#/g;function tf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tg(e,t){tp(e),t=tv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tm(e,t){return tp(e),t=tv(e,t),e.g.has(t)}function ty(e,t,r){tg(e,t),0<r.length&&(e.i=null,e.g.set(tv(e,t),T(r)),e.h+=r.length)}function tv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tw(e,t,r,n,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),n(r)}catch(e){}}function tb(){this.g=new em}function tE(e){this.l=e.Ub||null,this.j=e.eb||!1}function tT(e,t){eo.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function t_(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tI(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tC(e)}function tC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tS(e){let t="";return A(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function tx(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=tS(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):tn(e,t,r))}function tA(e){eo.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(r=tf.prototype).add=function(e,t){tp(this),this.i=null,e=tv(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},r.forEach=function(e,t){tp(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},r.na=function(){tp(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},r.V=function(e){tp(this);let t=[];if("string"==typeof e)tm(this,e)&&(t=t.concat(this.g.get(tv(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},r.set=function(e,t){return tp(this),this.i=null,tm(this,e=tv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let s=encodeURIComponent(String(n)),o=this.V(n);for(n=0;n<o.length;n++){var i=s;""!==o[n]&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")},E(tE,ey),tE.prototype.g=function(){return new tT(this.l,this.j)},tE.prototype.i=(e={},function(){return e}),E(tT,eo),(r=tT.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,tC(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||o).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tI(this)),this.readyState=0},r.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tC(this)),this.g&&(this.readyState=3,tC(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t_(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},r.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tI(this):tC(this),3==this.readyState&&t_(this)}},r.Ra=function(e){this.g&&(this.response=this.responseText=e,tI(this))},r.Qa=function(e){this.g&&(this.response=e,tI(this))},r.ga=function(){this.g&&tI(this)},r.setRequestHeader=function(e,t){this.u.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),E(tA,eo);var tD=/^https?$/i,tk=["POST","PUT"];function tN(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,tL(e),tO(e)}function tL(e){e.A||(e.A=!0,ea(e,"complete"),ea(e,"error"))}function tR(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=tP(e)||2!=e.Z())){if(e.u&&4==tP(e))eh(e.Ea,0,e);else if(ea(e,"readystatechange"),4==tP(e)){e.h=!1;try{let s=e.Z();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break;default:n=!1}if(!(t=n)){if(r=0===s){var i=String(e.D).match(e8)[1]||null;!i&&o.self&&o.self.location&&(i=o.self.location.protocol.slice(0,-1)),r=!tD.test(i?i.toLowerCase():"")}t=r}if(t)ea(e,"complete"),ea(e,"success");else{e.m=6;try{var a=2<tP(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",tL(e)}}finally{tO(e)}}}}function tO(e,t){if(e.g){tM(e);let r=e.g,n=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ea(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function tM(e){e.I&&(o.clearTimeout(e.I),e.I=null)}function tP(e){return e.g?e.g.readyState:0}function tF(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tV(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function tB(e){this.Aa=0,this.i=[],this.j=new eL,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tV("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tV("baseRetryDelayMs",5e3,e),this.cb=tV("retryDelaySeedMs",1e4,e),this.Wa=tV("forwardChannelMaxRetries",2,e),this.wa=tV("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new eY(e&&e.concurrentRequestLimit),this.Da=new tb,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tU(e){if(tq(e),3==e.G){var t=e.U++,r=e9(e.I);if(tn(r,"SID",e.K),tn(r,"RID",t),tn(r,"TYPE","terminate"),tH(e,r),(t=new eF(e,e.j,t)).L=2,t.v=ti(e9(r)),r=!1,o.navigator&&o.navigator.sendBeacon)try{r=o.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!r&&o.Image&&((new Image).src=t.v,r=!0),r||(t.g=t6(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ez(t)}t1(e)}function tj(e){e.g&&(tQ(e),e.g.cancel(),e.g=null)}function tq(e){tj(e),e.u&&(o.clearTimeout(e.u),e.u=null),tY(e),e.h.cancel(),e.s&&("number"==typeof e.s&&o.clearTimeout(e.s),e.s=null)}function t$(e){if(!e0(e.h)&&!e.s){e.s=!0;var t=e.Ga;O||F(),M||(O(),M=!0),P.add(t,e),e.B=0}}function tz(e,t){var r;r=t?t.l:e.U++;let n=e9(e.I);tn(n,"SID",e.K),tn(n,"RID",r),tn(n,"AID",e.T),tH(e,n),e.m&&e.o&&tx(n,e.m,e.o),r=new eF(e,e.j,r,e.B+1),null===e.m&&(r.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tG(e,r,1e3),r.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e6(e.h,r),ej(r,n,t)}function tH(e,t){e.H&&A(e.H,function(e,r){tn(t,r,e)}),e.l&&e4({},function(e,r){tn(t,r,e)})}function tG(e,t,r){r=Math.min(e.i.length,r);var n=e.l?w(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].g,a=i[o].map;if(0>(r-=t))t=Math.max(0,i[o].g-100),s=!1;else try{!function(e,t,r){let n=r||"";try{e4(e,function(e,r){let i=e;l(e)&&(i=ep(e)),t.push(n+r+"="+encodeURIComponent(i))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(a,e,"req"+r+"_")}catch(e){n&&n(a)}}if(s){n=e.join("&");break e}}}return t.D=e=e.i.splice(0,r),n}function tW(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;O||F(),M||(O(),M=!0),P.add(t,e),e.v=0}}function tK(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eN(w(e.Fa,e),tZ(e,e.v)),e.v++,!0)}function tQ(e){null!=e.A&&(o.clearTimeout(e.A),e.A=null)}function tX(e){e.g=new eF(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=e9(e.qa);tn(t,"RID","rpc"),tn(t,"SID",e.K),tn(t,"AID",e.T),tn(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&tn(t,"TO",e.ja),tn(t,"TYPE","xmlhttp"),tH(e,t),e.m&&e.o&&tx(t,e.m,e.o),e.L&&(e.g.I=e.L);var r=e.g;e=e.ia,r.L=1,r.v=ti(e9(t)),r.m=null,r.P=!0,eq(r,e)}function tY(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function tJ(e,t){var r,n=null;if(e.g==t){tY(e),tQ(e),e.g=null;var i=2}else{if(!e2(e.h,t))return;n=t.D,e3(e.h,t),i=1}if(0!=e.G){if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;ea(i=eC(),new ek(i,n)),t$(e)}else tW(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==i&&(r=t,!(e1(e.h)>=e.h.j-!!e.s)&&(e.s?(e.i=r.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eN(w(e.Ga,e,r),tZ(e,e.B)),e.B++,!0)))||2==i&&tK(e)))switch(n&&0<n.length&&((t=e.h).i=t.i.concat(n)),s){case 1:t0(e,5);break;case 4:t0(e,10);break;case 3:t0(e,6);break;default:t0(e,2)}}}function tZ(e,t){let r=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(r*=2),r*t}function t0(e,t){if(e.j.info("Error code "+t),2==t){var r=w(e.fb,e),n=e.Xa;let t=!n;n=new e7(n||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||te(n,"https"),ti(n),t?function(e,t){let r=new eL;if(o.Image){let n=new Image;n.onload=b(tw,r,"TestLoadImage: loaded",!0,t,n),n.onerror=b(tw,r,"TestLoadImage: error",!1,t,n),n.onabort=b(tw,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=b(tw,r,"TestLoadImage: timeout",!1,t,n),o.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(n.toString(),r):function(e,t){let r=new eL,n=new AbortController,i=setTimeout(()=>{n.abort(),tw(r,"TestPingServer: timeout",!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?tw(r,"TestPingServer: ok",!0,t):tw(r,"TestPingServer: server error",!1,t)}).catch(()=>{clearTimeout(i),tw(r,"TestPingServer: error",!1,t)})}(n.toString(),r)}else eD(2);e.G=0,e.l&&e.l.sa(t),t1(e),tq(e)}function t1(e){if(e.G=0,e.ka=[],e.l){let t=e5(e.h);(0!=t.length||0!=e.i.length)&&(_(e.ka,t),_(e.ka,e.i),e.h.i.length=0,T(e.i),e.i.length=0),e.l.ra()}}function t2(e,t,r){var n=r instanceof e7?e9(r):new e7(r);if(""!=n.g)t&&(n.g=t+"."+n.g),tt(n,n.s);else{var i=o.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new e7(null);n&&te(s,n),t&&(s.g=t),i&&tt(s,i),r&&(s.l=r),n=s}return r=e.D,t=e.ya,r&&t&&tn(n,r,t),tn(n,"VER",e.la),tH(e,n),n}function t6(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tA(e.Ca&&!e.pa?new tE({eb:r}):e.pa)).Ha(e.J),t}function t3(){}function t5(){}function t4(e,t){eo.call(this),this.g=new tB(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!I(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t9(this)}function t8(e){eE.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t7(){eT.call(this),this.status=1}function t9(e){this.g=e}(r=tA.prototype).Ha=function(e){this.J=e},r.ea=function(e,r,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);r=r?r.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?ev(this.o):ev(t),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(r,String(e),!0),this.B=!1}catch(e){tN(this,e);return}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let e of i.keys())n.set(e,i.get(e));else throw Error("Unknown input type for opt_headers: "+String(i));for(let[t,a]of(i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=o.FormData&&e instanceof o.FormData,!(0<=Array.prototype.indexOf.call(tk,r,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n))this.g.setRequestHeader(t,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tM(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tN(this,e)}},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ea(this,"complete"),ea(this,"abort"),tO(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tO(this,!0)),tA.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?tR(this):this.bb())},r.bb=function(){tR(this)},r.isActive=function(){return!!this.g},r.Z=function(){try{return 2<tP(this)?this.g.status:-1}catch(e){return -1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eg(t)}},r.Ba=function(){return this.m},r.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(r=tB.prototype).la=8,r.G=1,r.connect=function(e,t,r,n){eD(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.I=t2(this,null,this.W),t$(this)},r.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new eF(this,this.j,e),s=this.o;if(this.S&&(s?N(s=D(s),this.S):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.map&&"string"==typeof(n=n.map.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=tG(this,i,t),tn(r=e9(this.I),"RID",e),tn(r,"CVER",22),this.D&&tn(r,"X-HTTP-Session-Id",this.D),tH(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(tS(s)))+"&"+t:this.m&&tx(r,this.m,s)),e6(this.h,i),this.Ua&&tn(r,"TYPE","init"),this.P?(tn(r,"$req",t),tn(r,"SID","null"),i.T=!0,ej(i,r,null)):ej(i,r,t),this.G=2}}else 3==this.G&&(e?tz(this,e):0==this.i.length||e0(this.h)||tz(this))},r.Fa=function(){if(this.u=null,tX(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eN(w(this.ab,this),e)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eD(10),tj(this),tX(this))},r.Za=function(){null!=this.C&&(this.C=null,tj(this),tK(this),eD(19))},r.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eD(2)):(this.j.info("Failed to ping google.com"),eD(1))},r.isActive=function(){return!!this.l&&this.l.isActive(this)},(r=t3.prototype).ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){},t5.prototype.g=function(e,t){return new t4(e,t)},E(t4,eo),t4.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t4.prototype.close=function(){tU(this.g)},t4.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.u&&((r={}).__data__=ep(e),e=r);t.i.push(new eX(t.Ya++,e)),3==t.G&&t$(t)},t4.prototype.N=function(){this.g.l=null,delete this.j,tU(this.g),delete this.g,t4.aa.N.call(this)},E(t8,eE),E(t7,eT),E(t9,t3),t9.prototype.ua=function(){ea(this.g,"a")},t9.prototype.ta=function(e){ea(this.g,new t8(e))},t9.prototype.sa=function(e){ea(this.g,new t7)},t9.prototype.ra=function(){ea(this.g,"b")},t5.prototype.createWebChannel=t5.prototype.g,t4.prototype.send=t4.prototype.o,t4.prototype.open=t4.prototype.m,t4.prototype.close=t4.prototype.close,y=eZ.createWebChannelTransport=function(){return new t5},m=eZ.getStatEventTarget=function(){return eC()},g=eZ.Event=e_,p=eZ.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eO.NO_ERROR=0,eO.TIMEOUT=8,eO.HTTP_ERROR=6,f=eZ.ErrorCode=eO,eM.COMPLETE="complete",d=eZ.EventType=eM,ew.EventType=eb,eb.OPEN="a",eb.CLOSE="b",eb.ERROR="c",eb.MESSAGE="d",eo.prototype.listen=eo.prototype.K,c=eZ.WebChannel=ew,eZ.FetchXmlHttpFactory=tE,tA.prototype.listenOnce=tA.prototype.L,tA.prototype.getLastError=tA.prototype.Ka,tA.prototype.getLastErrorCode=tA.prototype.Ba,tA.prototype.getStatus=tA.prototype.Z,tA.prototype.getResponseJson=tA.prototype.Oa,tA.prototype.getResponseText=tA.prototype.oa,tA.prototype.send=tA.prototype.ea,tA.prototype.setWithCredentials=tA.prototype.Ha,u=eZ.XhrIo=tA}).apply(void 0!==eJ?eJ:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),v=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,o=r-n;s<o;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(e0[n>>18&63]+e0[n>>12&63]+e0[n>>6&63]+e0[63&n]);return i.join("")}(e,s,s+16383>o?o:s+16383));return 1===n?i.push(e0[(t=e[r-1])>>2]+e0[t<<4&63]+"=="):2===n&&i.push(e0[(t=(e[r-2]<<8)+e[r-1])>>10]+e0[t>>4&63]+e0[t<<2&63]+"="),i.join("")};for(var e0=[],e1=[],e2="undefined"!=typeof Uint8Array?Uint8Array:Array,e6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e3=0,e5=e6.length;e3<e5;++e3)e0[e3]=e6[e3],e1[e6.charCodeAt(e3)]=e3;e1[45]=62,e1[95]=63,w=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,h=l>>1,u=-7,c=r?i-1:0,d=r?-1:1,f=e[t+c];for(c+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+c],c+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+c],c+=d,u-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=h}return(f?-1:1)*o*Math.pow(2,s-n)},b=function(e,t,r,n,i,s){var o,a,l,h=8*s-i-1,u=(1<<h)-1,c=u>>1,d=5960464477539062e-23*(23===i),f=n?0:s-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(t*l-1)*Math.pow(2,i),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[r+f]=255&o,f+=p,o/=256,h-=8);e[r+f-p]|=128*g};const e4="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function e8(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,e7.prototype),t}function e7(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return tt(e)}return e9(e,t,r)}function e9(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!e7.isEncoding(i))throw TypeError("Unknown encoding: "+i);let r=0|ts(n,i),s=e8(r),o=s.write(n,i);return o!==r&&(s=s.slice(0,o)),s}if(ArrayBuffer.isView(e)){var s=e;if(tA(s,Uint8Array)){let e=new Uint8Array(s);return tn(e.buffer,e.byteOffset,e.byteLength)}return tr(s)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(tA(e,ArrayBuffer)||e&&tA(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(tA(e,SharedArrayBuffer)||e&&tA(e.buffer,SharedArrayBuffer)))return tn(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return e7.from(o,t,r);let a=function(e){if(e7.isBuffer(e)){let t=0|ti(e.length),r=e8(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?e8(0):tr(e):"Buffer"===e.type&&Array.isArray(e.data)?tr(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return e7.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function te(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function tt(e){return te(e),e8(e<0?0:0|ti(e))}function tr(e){let t=e.length<0?0:0|ti(e.length),r=e8(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function tn(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),e7.prototype),n}function ti(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function ts(e,t){if(e7.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||tA(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return tC(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tS(e).length;default:if(i)return n?-1:tC(e).length;t=(""+t).toLowerCase(),i=!0}}function to(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=tD[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return tu(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var i,s,o;return i=this,s=t,o=r,0===s&&o===i.length?v(i):v(i.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function ta(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function tl(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=e7.from(t,n)),e7.isBuffer(t))return 0===t.length?-1:th(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return th(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function th(e,t,r,n,i){let s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(h(e,s)===h(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*o}else -1!==n&&(s-=s-n),n=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(h(e,s+n)!==h(t,n)){r=!1;break}if(r)return s}return -1}function tu(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,l;switch(o){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}var s=n;let o=s.length;if(o<=4096)return String.fromCharCode.apply(String,s);let a="",l=0;for(;l<o;)a+=String.fromCharCode.apply(String,s.slice(l,l+=4096));return a}function tc(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function td(e,t,r,n,i,s){if(!e7.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function tf(e,t,r,n,i){tE(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function tp(e,t,r,n,i){tE(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function tg(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function tm(e,t,r,n,i){return t*=1,r>>>=0,i||tg(e,t,r,4,34028234663852886e22,-34028234663852886e22),b(e,t,r,n,23,4),r+4}function ty(e,t,r,n,i){return t*=1,r>>>=0,i||tg(e,t,r,8,17976931348623157e292,-17976931348623157e292),b(e,t,r,n,52,8),r+8}e7.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),e7.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e7.prototype,"parent",{enumerable:!0,get:function(){if(e7.isBuffer(this))return this.buffer}}),Object.defineProperty(e7.prototype,"offset",{enumerable:!0,get:function(){if(e7.isBuffer(this))return this.byteOffset}}),e7.poolSize=8192,e7.from=function(e,t,r){return e9(e,t,r)},Object.setPrototypeOf(e7.prototype,Uint8Array.prototype),Object.setPrototypeOf(e7,Uint8Array),e7.alloc=function(e,t,r){return(te(e),e<=0)?e8(e):void 0!==t?"string"==typeof r?e8(e).fill(t,r):e8(e).fill(t):e8(e)},e7.allocUnsafe=function(e){return tt(e)},e7.allocUnsafeSlow=function(e){return tt(e)},e7.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==e7.prototype},e7.compare=function(e,t){if(tA(e,Uint8Array)&&(e=e7.from(e,e.offset,e.byteLength)),tA(t,Uint8Array)&&(t=e7.from(t,t.offset,t.byteLength)),!e7.isBuffer(e)||!e7.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},e7.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e7.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return e7.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=e7.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(tA(t,Uint8Array))i+t.length>n.length?(e7.isBuffer(t)||(t=e7.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(e7.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},e7.byteLength=ts,e7.prototype._isBuffer=!0,e7.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)ta(this,t,t+1);return this},e7.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)ta(this,t,t+3),ta(this,t+1,t+2);return this},e7.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)ta(this,t,t+7),ta(this,t+1,t+6),ta(this,t+2,t+5),ta(this,t+3,t+4);return this},e7.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?tu(this,0,e):to.apply(this,arguments)},e7.prototype.toLocaleString=e7.prototype.toString,e7.prototype.equals=function(e){if(!e7.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===e7.compare(this,e)},e7.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},e4&&(e7.prototype[e4]=e7.prototype.inspect),e7.prototype.compare=function(e,t,r,n,i){if(tA(e,Uint8Array)&&(e=e7.from(e,e.offset,e.byteLength)),!e7.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t,a=Math.min(s,o),l=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==h[e]){s=l[e],o=h[e];break}return s<o?-1:+(o<s)},e7.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},e7.prototype.indexOf=function(e,t,r){return tl(this,e,t,r,!0)},e7.prototype.lastIndexOf=function(e,t,r){return tl(this,e,t,r,!1)},e7.prototype.write=function(e,t,r,n){var i,s,o,a,l,h,u,c;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var a;let n=parseInt(t.substr(2*i,2),16);if((a=n)!=a)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,tx(tC(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=t,a=r,tx(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return l=t,h=r,tx(tS(e),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,c=r,tx(function(e,t){let r,n,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-u),this,u,c);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},e7.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e7.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,e7.prototype),n},e7.prototype.readUintLE=e7.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||tc(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},e7.prototype.readUintBE=e7.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||tc(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},e7.prototype.readUint8=e7.prototype.readUInt8=function(e,t){return e>>>=0,t||tc(e,1,this.length),this[e]},e7.prototype.readUint16LE=e7.prototype.readUInt16LE=function(e,t){return e>>>=0,t||tc(e,2,this.length),this[e]|this[e+1]<<8},e7.prototype.readUint16BE=e7.prototype.readUInt16BE=function(e,t){return e>>>=0,t||tc(e,2,this.length),this[e]<<8|this[e+1]},e7.prototype.readUint32LE=e7.prototype.readUInt32LE=function(e,t){return e>>>=0,t||tc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},e7.prototype.readUint32BE=e7.prototype.readUInt32BE=function(e,t){return e>>>=0,t||tc(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e7.prototype.readBigUInt64LE=tk(function(e){tT(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&t_(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),e7.prototype.readBigUInt64BE=tk(function(e){tT(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&t_(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),e7.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||tc(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},e7.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||tc(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},e7.prototype.readInt8=function(e,t){return(e>>>=0,t||tc(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},e7.prototype.readInt16LE=function(e,t){e>>>=0,t||tc(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},e7.prototype.readInt16BE=function(e,t){e>>>=0,t||tc(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},e7.prototype.readInt32LE=function(e,t){return e>>>=0,t||tc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e7.prototype.readInt32BE=function(e,t){return e>>>=0,t||tc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e7.prototype.readBigInt64LE=tk(function(e){tT(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&t_(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),e7.prototype.readBigInt64BE=tk(function(e){tT(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&t_(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),e7.prototype.readFloatLE=function(e,t){return e>>>=0,t||tc(e,4,this.length),w(this,e,!0,23,4)},e7.prototype.readFloatBE=function(e,t){return e>>>=0,t||tc(e,4,this.length),w(this,e,!1,23,4)},e7.prototype.readDoubleLE=function(e,t){return e>>>=0,t||tc(e,8,this.length),w(this,e,!0,52,8)},e7.prototype.readDoubleBE=function(e,t){return e>>>=0,t||tc(e,8,this.length),w(this,e,!1,52,8)},e7.prototype.writeUintLE=e7.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;td(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},e7.prototype.writeUintBE=e7.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;td(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},e7.prototype.writeUint8=e7.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,1,255,0),this[t]=255&e,t+1},e7.prototype.writeUint16LE=e7.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e7.prototype.writeUint16BE=e7.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e7.prototype.writeUint32LE=e7.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e7.prototype.writeUint32BE=e7.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e7.prototype.writeBigUInt64LE=tk(function(e,t=0){return tf(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),e7.prototype.writeBigUInt64BE=tk(function(e,t=0){return tp(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),e7.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);td(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},e7.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);td(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},e7.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e7.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e7.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e7.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e7.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||td(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e7.prototype.writeBigInt64LE=tk(function(e,t=0){return tf(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e7.prototype.writeBigInt64BE=tk(function(e,t=0){return tp(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e7.prototype.writeFloatLE=function(e,t,r){return tm(this,e,t,!0,r)},e7.prototype.writeFloatBE=function(e,t,r){return tm(this,e,t,!1,r)},e7.prototype.writeDoubleLE=function(e,t,r){return ty(this,e,t,!0,r)},e7.prototype.writeDoubleBE=function(e,t,r){return ty(this,e,t,!1,r)},e7.prototype.copy=function(e,t,r,n){if(!e7.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},e7.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!e7.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=e7.isBuffer(e)?e:e7.from(e,n),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const tv={};function tw(e,t,r){tv[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function tb(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function tE(e,t,r,n,i,s){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new tv.ERR_OUT_OF_RANGE("value",n,e)}tT(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&t_(i,n.length-(s+1))}function tT(e,t){if("number"!=typeof e)throw new tv.ERR_INVALID_ARG_TYPE(t,"number",e)}function t_(e,t,r){if(Math.floor(e)!==e)throw tT(e,r),new tv.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new tv.ERR_BUFFER_OUT_OF_BOUNDS;throw new tv.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}tw("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),tw("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),tw("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=tb(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=tb(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);const tI=/[^+/0-9A-Za-z-_]/g;function tC(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function tS(e){return function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),i=n[0],s=n[1],o=new e2((i+s)*3/4-s),a=0,l=s>0?i-4:i;for(r=0;r<l;r+=4)t=e1[e.charCodeAt(r)]<<18|e1[e.charCodeAt(r+1)]<<12|e1[e.charCodeAt(r+2)]<<6|e1[e.charCodeAt(r+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return 2===s&&(t=e1[e.charCodeAt(r)]<<2|e1[e.charCodeAt(r+1)]>>4,o[a++]=255&t),1===s&&(t=e1[e.charCodeAt(r)]<<10|e1[e.charCodeAt(r+1)]<<4|e1[e.charCodeAt(r+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o}(function(e){if((e=(e=e.split("=")[0]).trim().replace(tI,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function tx(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function tA(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}const tD=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function tk(e){return"undefined"==typeof BigInt?tN:e}function tN(){throw Error("BigInt not supported")}const tL="@firebase/firestore",tR="4.8.0";class tO{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tO.UNAUTHENTICATED=new tO(null),tO.GOOGLE_CREDENTIALS=new tO("google-credentials-uid"),tO.FIRST_PARTY=new tO("first-party-uid"),tO.MOCK_USER=new tO("mock-user");let tM="11.10.0";const tP=new ec("@firebase/firestore");function tF(){return tP.logLevel}function tV(e,...t){if(tP.logLevel<=a.DEBUG){let r=t.map(tj);tP.debug(`Firestore (${tM}): ${e}`,...r)}}function tB(e,...t){if(tP.logLevel<=a.ERROR){let r=t.map(tj);tP.error(`Firestore (${tM}): ${e}`,...r)}}function tU(e,...t){if(tP.logLevel<=a.WARN){let r=t.map(tj);tP.warn(`Firestore (${tM}): ${e}`,...r)}}function tj(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function tq(e,t,r){let n="Unexpected state";"string"==typeof t?n=t:r=t,t$(e,n,r)}function t$(e,t,r){let n=`FIRESTORE (${tM}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{n+=" CONTEXT: "+JSON.stringify(r)}catch(e){n+=" CONTEXT: "+r}throw tB(n),Error(n)}function tz(e,t,r,n){let i="Unexpected state";"string"==typeof r?i=r:n=r,e||t$(t,i,n)}const tH={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tG extends Y{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tW{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tK{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tO.UNAUTHENTICATED))}shutdown(){}}class tX{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tY{constructor(e){this.t=e,this.currentUser=tO.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tz(void 0===this.o,42304);let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new tW;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tW,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{tV("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(tV("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tW)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(tV("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tz("string"==typeof t.accessToken,31837,{l:t}),new tK(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return tz(null===e||"string"==typeof e,2055,{h:e}),new tO(e)}}class tJ{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tO.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tZ{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tJ(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tO.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=e&&void 0!==e.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tz(void 0===this.o,3512);let r=e=>{null!=e.error&&tV("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.m;return this.m=e.token,tV("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{tV("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?n(e):tV("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new t0(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(tz("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new t0(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function t2(){return new TextEncoder}class t6{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let r=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(40);for(let n=0;n<r.length;++n)t.length<20&&r[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[n]%62))}return t}}function t3(e,t){return e<t?-1:+(e>t)}function t5(e,t){let r=0;for(;r<e.length&&r<t.length;){let n=e.codePointAt(r),i=t.codePointAt(r);if(n!==i){if(n<128&&i<128)return t3(n,i);{let s=t2(),o=function(e,t){for(let r=0;r<e.length&&r<t.length;++r)if(e[r]!==t[r])return t3(e[r],t[r]);return t3(e.length,t.length)}(s.encode(t4(e,r)),s.encode(t4(t,r)));return 0!==o?o:t3(n,i)}}r+=n>65535?2:1}return t3(e.length,t.length)}function t4(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function t8(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}const t7="__name__";class t9{constructor(e,t,r){void 0===t?t=0:t>e.length&&tq(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&tq(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===t9.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof t9?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=t9.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return t3(e.length,t.length)}static compareSegments(e,t){let r=t9.isNumericId(e),n=t9.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?t9.extractNumericId(e).compare(t9.extractNumericId(t)):t5(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return l.fromString(e.substring(4,e.length-2))}}class re extends t9{construct(e,t,r){return new re(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new tG(tH.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new re(t)}static emptyPath(){return new re([])}}const rt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends t9{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return rt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===t7}static keyField(){return new rr([t7])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new tG(tH.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new tG(tH.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tG(tH.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new tG(tH.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class rn{constructor(e){this.path=e}static fromPath(e){return new rn(re.fromString(e))}static fromName(e){return new rn(re.fromString(e).popFirst(5))}static empty(){return new rn(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rn(new re(e.slice()))}}function ri(e){if(rn.isDocumentKey(e))throw new tG(tH.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function rs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tG(tH.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=function(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":tq(12329,{type:typeof e})}(e);throw new tG(tH.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function ro(e,t){let r={typeString:e};return t&&(r.value=t),r}function ra(e,t){let r;if("object"!=typeof e||null===e||Object.getPrototypeOf(e)!==Object.prototype&&null!==Object.getPrototypeOf(e))throw new tG(tH.INVALID_ARGUMENT,"JSON must be an object");for(let n in t)if(t[n]){let i=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}let o=e[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new tG(tH.INVALID_ARGUMENT,r);return!0}class rl{static now(){return rl.fromMillis(Date.now())}static fromDate(e){return rl.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*1e6);return new rl(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new tG(tH.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new tG(tH.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?t3(this.nanoseconds,e.nanoseconds):t3(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,rl._jsonSchema))return new rl(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rl._jsonSchemaVersion="firestore/timestamp/1.0",rl._jsonSchema={type:ro("string",rl._jsonSchemaVersion),seconds:ro("number"),nanoseconds:ro("number")};class rh{static fromTimestamp(e){return new rh(e)}static min(){return new rh(new rl(0,0))}static max(){return new rh(new rl(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ru{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ru(rh.min(),rn.empty(),-1)}static max(){return new ru(rh.max(),rn.empty(),-1)}}class rc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function rd(e){if(e.code!==tH.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;tV("LocalStore","Unexpectedly lost primary lease")}class rf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tq(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rf((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof rf?t:rf.resolve(t)}catch(e){return rf.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rf.reject(t)}static resolve(e){return new rf((t,r)=>{t(e)})}static reject(e){return new rf((t,r)=>{r(e)})}static waitFor(e){return new rf((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=rf.resolve(!1);for(let r of e)t=t.next(e=>e?rf.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new rf((r,n)=>{let i=e.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new rf((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}function rp(e){return"IndexedDbTransactionError"===e.name}class rg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ae&&this.ae(e),e}}rg.ue=-1;function rm(e){return 0===e&&1/e==-1/0}function ry(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function rv(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}class rw{constructor(e,t){this.comparator=e,this.root=t||rE.EMPTY}insert(e,t){return new rw(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rE.BLACK,null,null))}remove(e){return new rw(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rE.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rb(this.root,e,this.comparator,!1)}getReverseIterator(){return new rb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rb(this.root,e,this.comparator,!0)}}class rb{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rE{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:rE.RED,this.left=null!=n?n:rE.EMPTY,this.right=null!=i?i:rE.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new rE(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return rE.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return rE.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,rE.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,rE.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tq(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tq(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw tq(27949);return e+ +!this.isRed()}}rE.EMPTY=null,rE.RED=!0,rE.BLACK=!1,rE.EMPTY=new class{constructor(){this.size=0}get key(){throw tq(57766)}get value(){throw tq(16141)}get color(){throw tq(16727)}get left(){throw tq(29726)}get right(){throw tq(36894)}copy(e,t,r,n,i){return this}insert(e,t,r){return new rE(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rT{constructor(e){this.comparator=e,this.data=new rw(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rT)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new rT(this.comparator);return t.data=e,t}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rI{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new rI([])}unionWith(e){let t=new rT(rr.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new rI(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return t8(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rS{constructor(e){this.binaryString=e}static fromBase64String(e){return new rS(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new rC("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new rS(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return t3(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rS.EMPTY_BYTE_STRING=new rS("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rA(e){if(tz(!!e,39018),"string"==typeof e){let t=0,r=rx.exec(e);if(tz(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:rD(e.seconds),nanos:rD(e.nanos)}}function rD(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rk(e){return"string"==typeof e?rS.fromBase64String(e):rS.fromUint8Array(e)}const rN="server_timestamp",rL="__type__",rR="__previous_value__",rO="__local_write_time__";function rM(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[rL])?void 0:r.stringValue)===rN}function rP(e){let t=e.mapValue.fields[rR];return rM(t)?rP(t):t}function rF(e){let t=rA(e.mapValue.fields[rO].timestampValue);return new rl(t.seconds,t.nanos)}class rV{constructor(e,t,r,n,i,s,o,a,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=h}}const rB="(default)";class rU{constructor(e,t){this.projectId=e,this.database=t||rB}static empty(){return new rU("","")}get isDefaultDatabase(){return this.database===rB}isEqual(e){return e instanceof rU&&e.projectId===this.projectId&&e.database===this.database}}const rj="__max__",rq={mapValue:{fields:{__type__:{stringValue:rj}}}},r$="value";function rz(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rM(e)?4:r3(e)?0x1fffffffffffff:r2(e)?10:11:tq(28295,{value:e})}function rH(e,t){if(e===t)return!0;let r=rz(e);if(r!==rz(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rF(e).isEqual(rF(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=rA(e.timestampValue),i=rA(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos;case 5:return e.stringValue===t.stringValue;case 6:return rk(e.bytesValue).isEqual(rk(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return rD(e.geoPointValue.latitude)===rD(t.geoPointValue.latitude)&&rD(e.geoPointValue.longitude)===rD(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return rD(e.integerValue)===rD(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=rD(e.doubleValue),n=rD(t.doubleValue);return r===n?rm(r)===rm(n):isNaN(r)&&isNaN(n)}return!1;case 9:return t8(e.arrayValue.values||[],t.arrayValue.values||[],rH);case 10:case 11:let s=e.mapValue.fields||{},o=t.mapValue.fields||{};if(ry(s)!==ry(o))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===o[e]||!rH(s[e],o[e])))return!1;return!0;default:return tq(52216,{left:e})}}function rG(e,t){return void 0!==(e.values||[]).find(e=>rH(e,t))}function rW(e,t){if(e===t)return 0;let r=rz(e),n=rz(t);if(r!==n)return t3(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return t3(e.booleanValue,t.booleanValue);case 2:let i=rD(e.integerValue||e.doubleValue),s=rD(t.integerValue||t.doubleValue);return i<s?-1:i>s?1:i===s?0:isNaN(i)?isNaN(s)?0:-1:1;case 3:return rK(e.timestampValue,t.timestampValue);case 4:return rK(rF(e),rF(t));case 5:return t5(e.stringValue,t.stringValue);case 6:return function(e,t){let r=rk(e),n=rk(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=t3(r[e],n[e]);if(0!==t)return t}return t3(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let r=t3(rD(e.latitude),rD(t.latitude));return 0!==r?r:t3(rD(e.longitude),rD(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return rQ(e.arrayValue,t.arrayValue);case 10:return function(e,t){var r,n,i,s;let o=e.fields||{},a=t.fields||{},l=null==(r=o[r$])?void 0:r.arrayValue,h=null==(n=a[r$])?void 0:n.arrayValue,u=t3((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==h?void 0:h.values)?void 0:s.length)||0);return 0!==u?u:rQ(l,h)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===rq.mapValue&&t===rq.mapValue)return 0;if(e===rq.mapValue)return 1;if(t===rq.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=t5(n[e],s[e]);if(0!==t)return t;let o=rW(r[n[e]],i[s[e]]);if(0!==o)return o}return t3(n.length,s.length)}(e.mapValue,t.mapValue);default:throw tq(23264,{le:r})}}function rK(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return t3(e,t);let r=rA(e),n=rA(t),i=t3(r.seconds,n.seconds);return 0!==i?i:t3(r.nanos,n.nanos)}function rQ(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=rW(r[e],n[e]);if(t)return t}return t3(r.length,n.length)}function rX(e){var t,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=rA(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?rk(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,rn.fromName(t).toString()):"geoPointValue"in e?(r=e.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=rX(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${rX(e.fields[i])}`;return r+"}"}(e.mapValue):tq(61005,{value:e})}function rY(e){return!!e&&"integerValue"in e}function rJ(e){return!!e&&"arrayValue"in e}function rZ(e){return!!e&&"nullValue"in e}function r0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function r1(e){return!!e&&"mapValue"in e}function r2(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{}).__type__)?void 0:r.stringValue)==="__vector__"}function r6(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return rv(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=r6(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=r6(e.arrayValue.values[r]);return t}return Object.assign({},e)}function r3(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===rj}class r5{constructor(e){this.value=e}static empty(){return new r5({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!r1(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=r6(t)}setAll(e){let t=rr.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=r6(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());r1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rH(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];r1(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(rv(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new r5(r6(this.value))}}class r4{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new r4(e,0,rh.min(),rh.min(),rh.min(),r5.empty(),0)}static newFoundDocument(e,t,r,n){return new r4(e,1,t,rh.min(),r,n,0)}static newNoDocument(e,t){return new r4(e,2,t,rh.min(),rh.min(),r5.empty(),0)}static newUnknownDocument(e,t){return new r4(e,3,t,rh.min(),rh.min(),r5.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(rh.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=r5.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=r5.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof r4&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new r4(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class r8{constructor(e,t){this.position=e,this.inclusive=t}}function r7(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(n=s.field.isKeyField()?rn.comparator(rn.fromName(o.referenceValue),r.key):rW(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function r9(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!rH(e.position[r],t.position[r]))return!1;return!0}class ne{constructor(e,t="asc"){this.field=e,this.dir=t}}class nt{}class nr extends nt{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new no(e,t,r):"array-contains"===t?new nu(e,r):"in"===t?new nc(e,r):"not-in"===t?new nd(e,r):"array-contains-any"===t?new nf(e,r):new nr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new na(e,r):new nl(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(rW(t,this.value)):null!==t&&rz(this.value)===rz(t)&&this.matchesComparison(rW(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tq(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends nt{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new nn(e,t)}matches(e){return ni(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ni(e){return"and"===e.op}function ns(e){for(let t of e.filters)if(t instanceof nn)return!1;return!0}class no extends nr{constructor(e,t,r){super(e,t,r),this.key=rn.fromName(r.referenceValue)}matches(e){let t=rn.comparator(e.key,this.key);return this.matchesComparison(t)}}class na extends nr{constructor(e,t){super(e,"in",t),this.keys=nh("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nl extends nr{constructor(e,t){super(e,"not-in",t),this.keys=nh("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nh(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>rn.fromName(e.referenceValue))}class nu extends nr{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rJ(t)&&rG(t.arrayValue,this.value)}}class nc extends nr{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&rG(this.value.arrayValue,t)}}class nd extends nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(rG(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!rG(this.value.arrayValue,t)}}class nf extends nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rJ(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>rG(this.value.arrayValue,e))}}class np{constructor(e,t=null,r=[],n=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.Pe=null}}function ng(e,t=null,r=[],n=[],i=null,s=null,o=null){return new np(e,t,r,n,i,s,o)}function nm(e){if(null===e.Pe){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof nr)return t.field.canonicalString()+t.op.toString()+rX(t.value);if(ns(t)&&ni(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>rX(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>rX(e)).join(",")),e.Pe=t}return e.Pe}function ny(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof nr?r instanceof nr&&t.op===r.op&&t.field.isEqual(r.field)&&rH(t.value,r.value):t instanceof nn?r instanceof nn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void tq(19439)}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!r9(e.startAt,t.startAt)&&r9(e.endAt,t.endAt)}function nv(e){return rn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nw{constructor(e,t=null,r=[],n=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function nb(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nE(e){if(null===e.Te){let t;e.Te=[];let r=new Set;for(let t of e.explicitOrderBy)e.Te.push(t),r.add(t.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new rT(rr.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{r.has(t.canonicalString())||t.isKeyField()||e.Te.push(new ne(t,n))}),r.has(rr.keyField().canonicalString())||e.Te.push(new ne(rr.keyField(),n))}return e.Te}function nT(e){return e.Ie||(e.Ie=function(e,t){if("F"===e.limitType)return ng(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new ne(e.field,t)});let r=e.endAt?new r8(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new r8(e.startAt.position,e.startAt.inclusive):null;return ng(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}(e,nE(e))),e.Ie}function n_(e,t,r){return new nw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function nI(e,t){return ny(nT(e),nT(t))&&e.limitType===t.limitType}function nC(e){return`${nm(nT(e))}|lt:${e.limitType}`}function nS(e){var t;let r;return`Query(target=${r=(t=nT(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof nr?`${t.field.canonicalString()} ${t.op} ${rX(t.value)}`:t instanceof nn?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(e=>rX(e)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(e=>rX(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function nx(e,t){return t.isFoundDocument()&&function(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):rn.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(let r of nE(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,r){let n=r7(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,nE(e),t))&&(!e.endAt||!!function(e,t,r){let n=r7(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,nE(e),t))}function nA(e){return(t,r)=>{let n=!1;for(let i of nE(e)){let e=function(e,t,r){let n=e.field.isKeyField()?rn.comparator(t.key,r.key):function(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?rW(n,i):tq(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return tq(19790,{direction:e.dir})}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}class nD{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){rv(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){var e=this.inner;for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}size(){return this.innerSize}}const nk=new rw(rn.comparator),nN=new rw(rn.comparator);function nL(...e){let t=nN;for(let r of e)t=t.insert(r.key,r);return t}function nR(){return new nD(e=>e.toString(),(e,t)=>e.isEqual(t))}new rw(rn.comparator);const nO=new rT(rn.comparator);function nM(...e){let t=nO;for(let r of e)t=t.add(r);return t}const nP=new rT(t3);class nF{constructor(){this._=void 0}}class nV extends nF{}class nB extends nF{constructor(e){super(),this.elements=e}}function nU(e,t){let r=nH(t);for(let t of e.elements)r.some(e=>rH(e,t))||r.push(t);return{arrayValue:{values:r}}}class nj extends nF{constructor(e){super(),this.elements=e}}function nq(e,t){let r=nH(t);for(let t of e.elements)r=r.filter(e=>!rH(e,t));return{arrayValue:{values:r}}}class n$ extends nF{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function nz(e){return rD(e.integerValue||e.doubleValue)}function nH(e){return rJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class nG{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nG}static exists(e){return new nG(void 0,e)}static updateTime(e){return new nG(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nW(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class nK{}function nQ(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new n6(e.key,nG.none()):new nJ(e.key,e.data,nG.none());{let r=e.data,n=r5.empty(),i=new rT(rr.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new nZ(e.key,n,new rI(i.toArray()),nG.none())}}function nX(e,t,r,n){return e instanceof nJ?function(e,t,r,n){if(!nW(e.precondition,t))return r;let i=e.value.clone(),s=n2(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof nZ?function(e,t,r,n){if(!nW(e.precondition,t))return r;let i=n2(e.fieldTransforms,n,t),s=t.data;return(s.setAll(n0(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):nW(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function nY(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&t8(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof nB&&n instanceof nB||r instanceof nj&&n instanceof nj?t8(r.elements,n.elements,rH):r instanceof n$&&n instanceof n$?rH(r.Ee,n.Ee):r instanceof nV&&n instanceof nV)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nJ extends nK{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class nZ extends nK{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function n0(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function n1(e,t,r){let n=new Map;tz(e.length===r.length,32656,{Ae:r.length,Re:e.length});for(let s=0;s<r.length;s++){var i;let o=e[s],a=o.transform,l=t.data.field(o.field);n.set(o.field,(i=r[s],a instanceof nB?nU(a,l):a instanceof nj?nq(a,l):i))}return n}function n2(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,e instanceof nV?function(e,t){let r={fields:{[rL]:{stringValue:rN},[rO]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&rM(t)&&(t=rP(t)),t&&(r.fields[rR]=t),{mapValue:r}}(t,s):e instanceof nB?nU(e,s):e instanceof nj?nq(e,s):function(e,t){let r=function(e,t){return e instanceof n$?rY(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}(e,t),n=nz(r)+nz(e.Ee);return rY(r)&&rY(e.Ee)?{integerValue:""+n}:function(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(t)?"-0":t}}(e.serializer,n)}(e,s))}return n}class n6 extends nK{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n3{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&function(e,t,r){e instanceof nJ?function(e,t,r){let n=e.value.clone(),i=n1(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):e instanceof nZ?function(e,t,r){if(!nW(e.precondition,t))return t.convertToUnknownDocument(r.version);let n=n1(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(n0(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(e,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=nX(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=nX(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=nR();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields),a=nQ(s,o=t.has(n.key)?null:o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(rh.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nM())}isEqual(e){return this.batchId===e.batchId&&t8(this.mutations,e.mutations,(e,t)=>nY(e,t))&&t8(this.baseMutations,e.baseMutations,(e,t)=>nY(e,t))}}class n5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class n4{constructor(e,t){this.count=e,this.unchangedNames=t}}function n8(e){if(void 0===e)return tB("GRPC error has no .code"),tH.UNKNOWN;switch(e){case E.OK:return tH.OK;case E.CANCELLED:return tH.CANCELLED;case E.UNKNOWN:return tH.UNKNOWN;case E.DEADLINE_EXCEEDED:return tH.DEADLINE_EXCEEDED;case E.RESOURCE_EXHAUSTED:return tH.RESOURCE_EXHAUSTED;case E.INTERNAL:return tH.INTERNAL;case E.UNAVAILABLE:return tH.UNAVAILABLE;case E.UNAUTHENTICATED:return tH.UNAUTHENTICATED;case E.INVALID_ARGUMENT:return tH.INVALID_ARGUMENT;case E.NOT_FOUND:return tH.NOT_FOUND;case E.ALREADY_EXISTS:return tH.ALREADY_EXISTS;case E.PERMISSION_DENIED:return tH.PERMISSION_DENIED;case E.FAILED_PRECONDITION:return tH.FAILED_PRECONDITION;case E.ABORTED:return tH.ABORTED;case E.OUT_OF_RANGE:return tH.OUT_OF_RANGE;case E.UNIMPLEMENTED:return tH.UNIMPLEMENTED;case E.DATA_LOSS:return tH.DATA_LOSS;default:return tq(39323,{code:e})}}(T=E||(E={}))[T.OK=0]="OK",T[T.CANCELLED=1]="CANCELLED",T[T.UNKNOWN=2]="UNKNOWN",T[T.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",T[T.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",T[T.NOT_FOUND=5]="NOT_FOUND",T[T.ALREADY_EXISTS=6]="ALREADY_EXISTS",T[T.PERMISSION_DENIED=7]="PERMISSION_DENIED",T[T.UNAUTHENTICATED=16]="UNAUTHENTICATED",T[T.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",T[T.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",T[T.ABORTED=10]="ABORTED",T[T.OUT_OF_RANGE=11]="OUT_OF_RANGE",T[T.UNIMPLEMENTED=12]="UNIMPLEMENTED",T[T.INTERNAL=13]="INTERNAL",T[T.UNAVAILABLE=14]="UNAVAILABLE",T[T.DATA_LOSS=15]="DATA_LOSS";const n7=new l([0xffffffff,0xffffffff],0);function n9(e){let t=t2().encode(e),r=new h;return r.update(t),new Uint8Array(r.digest())}function ie(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new l([r,n],0),new l([i,s],0)]}class it{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ir(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new ir(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ir(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=l.fromNumber(this.fe)}pe(e,t,r){let n=e.add(t.multiply(l.fromNumber(r)));return 1===n.compare(n7)&&(n=new l([n.getBits(0),n.getBits(1)],0)),n.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;let[t,r]=ie(n9(e));for(let e=0;e<this.hashCount;e++){let n=this.pe(t,r,e);if(!this.ye(n))return!1}return!0}static create(e,t,r){let n=new it(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.fe)return;let[t,r]=ie(n9(e));for(let e=0;e<this.hashCount;e++){let n=this.pe(t,r,e);this.we(n)}}we(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ir extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ii{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,is.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ii(rh.min(),n,new rw(t3),nk,nM())}}class is{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new is(r,t,nM(),nM(),nM())}}class io{constructor(e,t,r,n){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=n}}class ia{constructor(e,t){this.targetId=e,this.De=t}}class il{constructor(e,t,r=rS.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class ih{constructor(){this.ve=0,this.Ce=id(),this.Fe=rS.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nM(),t=nM(),r=nM();return this.Ce.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:tq(38017,{changeType:i})}}),new is(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=id()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tz(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class iu{constructor(e){this.We=e,this.Ge=new Map,this.ze=nk,this.je=ic(),this.Je=ic(),this.He=new rw(t3)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:tq(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,r=e.De.count,n=this.st(t);if(n){let i=n.target;if(nv(i))if(0===r){let e=new rn(i.path);this.Xe(t,e,r4.newNoDocument(e,rh.min()))}else tz(1===r,20013,{expectedCount:r});else{let n=this.ot(t);if(n!==r){let r=this._t(e),i=r?this.ut(r,e,n):1;0!==i&&(this.rt(t),this.He=this.He.insert(t,2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}_t(e){let t,r,n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;try{t=rk(i).toUint8Array()}catch(e){if(e instanceof rC)return tU("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new it(t,s,o)}catch(e){return tU(e instanceof ir?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.fe?null:r}ut(e,t,r){return 2*(t.De.count!==r-this.ht(e,t.targetId))}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.We.lt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;e.mightContain(s)||(this.Xe(t,r,null),n++)}),n}Pt(e){let t=new Map;this.Ge.forEach((r,n)=>{let i=this.st(n);if(i){if(r.current&&nv(i.target)){let t=new rn(i.target.path);this.Tt(t).has(n)||this.It(n,t)||this.Xe(n,t,r4.newNoDocument(t,e))}r.Ne&&(t.set(n,r.Le()),r.ke())}});let r=nM();this.Je.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.ze.forEach((t,r)=>r.setReadTime(e));let n=new ii(e,t,this.He,this.ze,r);return this.ze=nk,this.je=ic(),this.Je=ic(),this.He=new rw(t3),n}Ze(e,t){if(!this.nt(e))return;let r=2*!!this.It(e,t.key);this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let n=this.tt(e);this.It(e,t)?n.qe(t,1):n.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ih,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new rT(t3),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new rT(t3),this.je=this.je.insert(e,t)),t}nt(e){let t=null!==this.st(e);return t||tV("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ih),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ic(){return new rw(rn.comparator)}function id(){return new rw(rn.comparator)}const ip={asc:"ASCENDING",desc:"DESCENDING"},ig={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},im={and:"AND",or:"OR"};class iy{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iv(e,t){return e.useProto3Json||null==t?t:{value:t}}function iw(e){return tz(!!e,49232),rh.fromTimestamp(function(e){let t=rA(e);return new rl(t.seconds,t.nanos)}(e))}function ib(e,t){let r=new re(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?r:r.child(t)}function iE(e){let t=re.fromString(e);return tz(iA(t),10190,{key:t.toString()}),t}function iT(e,t){let r=iE(t);if(r.get(1)!==e.databaseId.projectId)throw new tG(tH.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new tG(tH.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new rn(iC(r))}function i_(e,t){return ib(e.databaseId,t).canonicalString()}function iI(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iC(e){return tz(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function iS(e){return{fieldPath:e.canonicalString()}}function ix(e){return rr.fromServerFormat(e.fieldPath)}function iA(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class iD{constructor(e,t,r,n,i=rh.min(),s=rh.min(),o=rS.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new iD(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new iD(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new iD(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new iD(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ik{constructor(e){this.gt=e}}class iN{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(+!!e.booleanValue);else if("integerValue"in e)this.Ct(t,15),t.Ft(rD(e.integerValue));else if("doubleValue"in e){let r=rD(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),rm(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),"string"==typeof r&&(r=rA(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(rk(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?r3(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):r2(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):tq(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};for(let e of(this.Ct(t,55),Object.keys(r)))this.xt(e,t),this.Dt(r[e],t)}Lt(e,t){var r,n;let i=e.fields||{};this.Ct(t,53);let s=(null==(n=null==(r=i[r$].arrayValue)?void 0:r.values)?void 0:n.length)||0;this.Ct(t,15),t.Ft(rD(s)),this.xt(r$,t),this.Dt(i[r$],t)}qt(e,t){let r=e.values||[];for(let e of(this.Ct(t,50),r))this.Dt(e,t)}Bt(e,t){this.Ct(t,37),rn.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}iN.Ut=new iN;class iL{constructor(){this.Dn=new iR}addToCollectionParentIndex(e,t){return this.Dn.add(t),rf.resolve()}getCollectionParents(e,t){return rf.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return rf.resolve()}deleteFieldIndex(e,t){return rf.resolve()}deleteAllFieldIndexes(e){return rf.resolve()}createTargetIndexes(e,t){return rf.resolve()}getDocumentsMatchingTarget(e,t){return rf.resolve(null)}getIndexType(e,t){return rf.resolve(0)}getFieldIndexes(e,t){return rf.resolve([])}getNextCollectionGroupToUpdate(e){return rf.resolve(null)}getMinOffset(e,t){return rf.resolve(ru.min())}getMinOffsetFromCollectionGroup(e,t){return rf.resolve(ru.min())}updateCollectionGroup(e,t,r){return rf.resolve()}updateIndexEntries(e,t){return rf.resolve()}}class iR{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new rT(re.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new rT(re.comparator)).toArray()}}new Uint8Array(0);const iO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class iM{static withCacheSize(e){return new iM(e,iM.DEFAULT_COLLECTION_PERCENTILE,iM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}iM.DEFAULT_COLLECTION_PERCENTILE=10,iM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iM.DEFAULT=new iM(0x2800000,iM.DEFAULT_COLLECTION_PERCENTILE,iM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iM.DISABLED=new iM(-1,0,0);class iP{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new iP(0)}static ur(){return new iP(-1)}}const iF="LruGarbageCollector";function iV([e,t],[r,n]){let i=t3(e,r);return 0===i?t3(t,n):i}class iB{constructor(e){this.Tr=e,this.buffer=new rT(iV),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>iV(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){tV(iF,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rp(e)?tV(iF,"Ignoring IndexedDB error during garbage collection: ",e):await rd(e)}await this.Rr(3e5)})}}class ij{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return rf.resolve(rg.ue);let r=new iB(t);return this.Vr.forEachTarget(e,e=>r.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>r.Er(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(tV("LruGarbageCollector","Garbage collection skipped; disabled"),rf.resolve(iO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tV("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,n,i,s,o,l,h,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(tV("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,o=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(h=Date.now(),tF()<=a.DEBUG&&tV("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${n} in `+(o-s)+"ms\n"+`	Removed ${i} targets in `+(l-o)+"ms\n"+`	Removed ${e} documents in `+(h-l)+"ms\n"+`Total Duration: ${h-u}ms`),rf.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}class iq{constructor(){this.changes=new nD(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,r4.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?rf.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class i${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iz{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&nX(r.mutation,e,rI.empty(),rl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,nM()).next(()=>t))}getLocalViewOfDocuments(e,t,r=nM()){let n=nR();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=nL();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=nR();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nM()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=nk,s=nR(),o=nR();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof nZ)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),nX(o.mutation,t,o.mutation.getFieldMask(),rl.now())):s.set(t.key,rI.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return o.set(e,new i$(t,null!=(r=s.get(e))?r:null))}),o))}recalculateAndSaveOverlays(e,t){let r=nR(),n=new rw((e,t)=>e-t),i=nM();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||rI.empty();o=i.applyToLocalView(s,o),r.set(e,o);let a=(n.get(i.batchId)||nM()).add(e);n=n.insert(i.batchId,a)})}).next(()=>{let s=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),a=n.key,l=n.value,h=nR();l.forEach(e=>{if(!i.has(e)){let n=nQ(t.get(e),r.get(e));null!==n&&h.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,h))}return rf.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return rn.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):null!==t.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):rf.resolve(nR()),o=-1,a=i;return s.next(t=>rf.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?rf.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,nM())).next(e=>{let t;return{batchId:o,changes:(t=nN,e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t)}}))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rn(t)).next(e=>{let t=nL();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=nL();return this.indexManager.getCollectionParents(e,i).next(o=>rf.forEach(o,o=>{let a=new nw(o.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,a,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,r4.newInvalidDocument(n)))});let r=nL();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&nX(s.mutation,n,rI.empty(),rl.now()),nx(t,n)&&(r=r.insert(e,n))}),r})}}class iH{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return rf.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,{id:t.id,version:t.version,createTime:iw(t.createTime)}),rf.resolve()}getNamedQuery(e,t){return rf.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,{name:t.name,query:function(e){let t=function(e){var t;let r,n=function(e){let t=iE(e);return 4===t.length?re.emptyPath():iC(t)}(e.parent),i=e.structuredQuery,s=i.from?i.from.length:0,o=null;if(s>0){tz(1===s,65062);let e=i.from[0];e.allDescendants?o=e.collectionId:n=n.child(e.collectionId)}let a=[];i.where&&(a=function(e){var t;let r=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=ix(e.unaryFilter.field);return nr.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=ix(e.unaryFilter.field);return nr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=ix(e.unaryFilter.field);return nr.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=ix(e.unaryFilter.field);return nr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tq(61313);default:return tq(60726)}}(t):void 0!==t.fieldFilter?nr.create(ix(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tq(58110);default:return tq(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?nn.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return tq(1026)}}(t.compositeFilter.op)):tq(30097,{filter:t})}(e);return r instanceof nn&&ns(t=r)&&ni(t)?r.getFilters():[r]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(e=>new ne(ix(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let h=null;i.limit&&(h=null==(r="object"==typeof(t=i.limit)?t.value:t)?null:r);let u=null;i.startAt&&(u=function(e){let t=!!e.before;return new r8(e.values||[],t)}(i.startAt));let c=null;return i.endAt&&(c=function(e){let t=!e.before;return new r8(e.values||[],t)}(i.endAt)),new nw(n,o,l,a,h,"F",u,c)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?n_(t,t.limit,"L"):t}(t.bundledQuery),readTime:iw(t.readTime)}),rf.resolve()}}class iG{constructor(){this.overlays=new rw(rn.comparator),this.kr=new Map}getOverlay(e,t){return rf.resolve(this.overlays.get(t))}getOverlays(e,t){let r=nR();return rf.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.wt(e,t,n)}),rf.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.kr.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(r)),rf.resolve()}getOverlaysForCollection(e,t,r){let n=nR(),i=t.length+1,s=new rn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return rf.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new rw((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=nR(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=nR(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return rf.resolve(o)}wt(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.kr.get(n.largestBatchId).delete(r.key);this.kr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new n5(t,r));let i=this.kr.get(t);void 0===i&&(i=nM(),this.kr.set(t,i)),this.kr.set(t,i.add(r.key))}}class iW{constructor(){this.sessionToken=rS.EMPTY_BYTE_STRING}getSessionToken(e){return rf.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rf.resolve()}}class iK{constructor(){this.qr=new rT(iQ.Qr),this.$r=new rT(iQ.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new iQ(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new iQ(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){let t=new rn(new re([])),r=new iQ(t,e),n=new iQ(t,e+1),i=[];return this.$r.forEachInRange([r,n],e=>{this.Wr(e),i.push(e.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new rn(new re([])),r=new iQ(t,e),n=new iQ(t,e+1),i=nM();return this.$r.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new iQ(e,0),r=this.qr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class iQ{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return rn.comparator(e.key,t.key)||t3(e.Hr,t.Hr)}static Ur(e,t){return t3(e.Hr,t.Hr)||rn.comparator(e.key,t.key)}}class iX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new rT(iQ.Qr)}checkEmpty(e){return rf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new n3(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.Yr=this.Yr.add(new iQ(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return rf.resolve(s)}lookupMutationBatch(e,t){return rf.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.Xr(t+1),n=r<0?0:r;return rf.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return rf.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return rf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new iQ(t,0),n=new iQ(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,n],e=>{let t=this.Zr(e.Hr);i.push(t)}),rf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rT(t3);return t.forEach(e=>{let t=new iQ(e,0),n=new iQ(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,n],e=>{r=r.add(e.Hr)})}),rf.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;rn.isDocumentKey(i)||(i=i.child(""));let s=new iQ(new rn(i),0),o=new rT(t3);return this.Yr.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.Hr)),!0)},s),rf.resolve(this.ei(o))}ei(e){let t=[];return e.forEach(e=>{let r=this.Zr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){tz(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Yr;return rf.forEach(t.mutations,n=>{let i=new iQ(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new iQ(t,0),n=this.Yr.firstAfterOrEqual(r);return rf.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,rf.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iY{constructor(e){this.ni=e,this.docs=new rw(rn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return rf.resolve(r?r.document.mutableCopy():r4.newInvalidDocument(t))}getEntries(e,t){let r=nk;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():r4.newInvalidDocument(e))}),rf.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=nk,s=t.path,o=new rn(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=rn.comparator(e.documentKey,t.documentKey))?r:t3(e.largestBatchId,t.largestBatchId)}(new ru(o.readTime,o.key,-1),r)||(n.has(o.key)||nx(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return rf.resolve(i)}getAllFromCollectionGroup(e,t,r,n){tq(9500)}ri(e,t){return rf.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new iJ(this)}getSize(e){return rf.resolve(this.size)}}class iJ extends iq{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.Or.addEntry(e,n)):this.Or.removeEntry(r)}),rf.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class iZ{constructor(e){this.persistence=e,this.ii=new nD(e=>nm(e),ny),this.lastRemoteSnapshotVersion=rh.min(),this.highestTargetId=0,this.si=0,this.oi=new iK,this.targetCount=0,this._i=iP.ar()}forEachTarget(e,t){return this.ii.forEach((e,r)=>t(r)),rf.resolve()}getLastRemoteSnapshotVersion(e){return rf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rf.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),rf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),rf.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new iP(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,rf.resolve()}updateTargetData(e,t){return this.hr(t),rf.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,rf.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.ii.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.ii.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),rf.waitFor(i).next(()=>n)}getTargetCount(e){return rf.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return rf.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),rf.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),rf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),rf.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return rf.resolve(r)}containsKey(e,t){return rf.resolve(this.oi.containsKey(t))}}class i0{constructor(e,t){this.ai={},this.overlays={},this.ui=new rg(0),this.ci=!1,this.ci=!0,this.li=new iW,this.referenceDelegate=e(this),this.hi=new iZ(this),this.indexManager=new iL,this.remoteDocumentCache=new iY(e=>this.referenceDelegate.Pi(e)),this.serializer=new ik(t),this.Ti=new iH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new iX(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){tV("MemoryPersistence","Starting transaction:",e);let n=new i1(this.ui.next());return this.referenceDelegate.Ii(),r(n).next(e=>this.referenceDelegate.di(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Ei(e,t){return rf.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class i1 extends rc{constructor(e){super(),this.currentSequenceNumber=e}}class i2{constructor(e){this.persistence=e,this.Ai=new iK,this.Ri=null}static Vi(e){return new i2(e)}get mi(){if(this.Ri)return this.Ri;throw tq(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),rf.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),rf.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),rf.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rf.forEach(this.mi,r=>{let n=rn.fromPath(r);return this.fi(e,n).next(e=>{e||t.removeEntry(n,rh.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return rf.or([()=>rf.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class i6{constructor(e,t){this.persistence=e,this.gi=new nD(e=>(function(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=n}}return r}(e.get(r),t);return t+"\x01\x01"})(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=new ij(this,t)}static Vi(e,t){return new i6(e,t)}Ii(){}di(e){return rf.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return rf.forEach(this.gi,(r,n)=>this.Sr(e,r,n).next(e=>e?rf.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.ri(e,n=>this.Sr(e,n,t).next(e=>{e||(r++,i.removeEntry(n,rh.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),rf.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),rf.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),rf.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),rf.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(rz(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let r=rP(t);return r?16+e(r):16;case 5:return 2*t.stringValue.length;case 6:return rk(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,r)=>t+e(r),0);case 10:case 11:var n;let i;return n=t.mapValue,i=0,rv(n.fields,(t,r)=>{i+=t.length+e(r)}),i;default:throw tq(13486,{value:t})}}(e.data.value)),t}Sr(e,t,r){return rf.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.gi.get(t);return rf.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class i3{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=n}static Es(e,t){let r=nM(),n=nM();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new i3(e,t.fromCache,r,n)}}class i5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class i4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=!function(){var e;let t=null==(e=q())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(C.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.ps(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ys(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new i5;return this.ws(e,t,r).next(n=>{if(i.result=n,this.Rs)return this.Ss(e,t,r,n.size)})}).next(()=>i.result)}Ss(e,t,r,n){return r.documentReadCount<this.Vs?(tF()<=a.DEBUG&&tV("QueryEngine","SDK will not create cache indexes for query:",nS(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),rf.resolve()):(tF()<=a.DEBUG&&tV("QueryEngine","Query:",nS(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.fs*n?(tF()<=a.DEBUG&&tV("QueryEngine","The SDK decides to create cache indexes for query:",nS(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nT(t))):rf.resolve())}ps(e,t){if(nb(t))return rf.resolve(null);let r=nT(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=nT(t=n_(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=nM(...n);return this.gs.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.bs(t,n);return this.Ds(t,s,i,r.readTime)?this.ps(e,n_(t,null,"F")):this.vs(e,s,t,r)}))})))}ys(e,t,r,n){return nb(t)||n.isEqual(rh.min())?rf.resolve(null):this.gs.getDocuments(e,r).next(i=>{let s=this.bs(t,i);return this.Ds(t,s,r,n)?rf.resolve(null):(tF()<=a.DEBUG&&tV("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),nS(t)),this.vs(e,s,t,function(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new ru(rh.fromTimestamp(1e9===n?new rl(r+1,0):new rl(r,n)),rn.empty(),-1)}(n,0)).next(e=>e))})}bs(e,t){let r=new rT(nA(e));return t.forEach((t,n)=>{nx(e,n)&&(r=r.add(n))}),r}Ds(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}ws(e,t,r){return tF()<=a.DEBUG&&tV("QueryEngine","Using full collection scan to execute query:",nS(t)),this.gs.getDocumentsMatchingQuery(e,t,ru.min(),r)}vs(e,t,r,n){return this.gs.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const i8="LocalStore";class i7{constructor(e,t,r,n){this.persistence=e,this.Cs=t,this.serializer=n,this.Fs=new rw(t3),this.Ms=new nD(e=>nm(e),ny),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iz(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}async function i9(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.Ns(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],s=[],o=nM();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({Bs:e,removedBatchIds:i,addedBatchIds:s}))})})}function se(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}async function st(e,t,r){let n=e.Fs.get(t);try{r||await e.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,n))}catch(e){if(!rp(e))throw e;tV(i8,`Failed to update sequence numbers for target ${t}: ${e}`)}e.Fs=e.Fs.remove(t),e.Ms.delete(n.target)}function sr(e,t,r){let n=rh.min(),i=nM();return e.persistence.runTransaction("Execute query","readwrite",s=>(function(e,t,r){let n=e.Ms.get(r);return void 0!==n?rf.resolve(e.Fs.get(n)):e.hi.getTargetData(t,r)})(e,s,nT(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.hi.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.Cs.getDocumentsMatchingQuery(s,t,r?n:rh.min(),r?i:nM())).next(r=>{var n,s,o;let a;return n=e,s=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),o=r,a=n.xs.get(s)||rh.min(),o.forEach((e,t)=>{t.readTime.compareTo(a)>0&&(a=t.readTime)}),n.xs.set(s,a),{documents:r,qs:i}}))}class sn{constructor(){this.activeTargetIds=nP}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class si{constructor(){this.Fo=new sn,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sn,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ss{xo(e){}shutdown(){}}const so="ConnectivityMonitor";class sa{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){for(let e of(tV(so,"Network connectivity changed: AVAILABLE"),this.ko))e(0)}Lo(){for(let e of(tV(so,"Network connectivity changed: UNAVAILABLE"),this.ko))e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sl=null;function sh(){return null===sl?sl=0x10000000+Math.round(0x80000000*Math.random()):sl++,"0x"+sl.toString(16)}const su="RestConnection",sc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sd{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${n}`,this.Ko=this.databaseId.database===rB?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Wo(e,t,r,n,i){let s=sh(),o=this.Go(e,t.toUriEncodedString());tV(su,`Sending RPC '${e}' ${s}:`,o,r);let a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,n,i);let{host:l}=new URL(o),h=W(l);return this.jo(e,o,a,r,h).then(t=>(tV(su,`Received RPC '${e}' ${s}: `,t),t),t=>{throw tU(su,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",r),t})}Jo(e,t,r,n,i,s){return this.Wo(e,t,r,n,i)}zo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tM,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}Go(e,t){let r=sc[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}class sf{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const sp="WebChannelConnection";class sg extends sd{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,n,i){let s=sh();return new Promise((i,o)=>{let a=new u;a.setWithCredentials(!0),a.listenOnce(d.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case f.NO_ERROR:let t=a.getResponseJson();tV(sp,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case f.TIMEOUT:tV(sp,`RPC '${e}' ${s} timed out`),o(new tG(tH.DEADLINE_EXCEEDED,"Request time out"));break;case f.HTTP_ERROR:let r=a.getStatus();if(tV(sp,`RPC '${e}' ${s} failed with status:`,r,"response text:",a.getResponseText()),r>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(tH).indexOf(t)>=0?t:tH.UNKNOWN}(t.status);o(new tG(e,t.message))}else o(new tG(tH.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new tG(tH.UNAVAILABLE,"Connection failed."));break;default:tq(9055,{c_:e,streamId:s,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{tV(sp,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(n);tV(sp,`RPC '${e}' ${s} sending request:`,n),a.send(t,"POST",l,r,15)})}P_(e,t,r){let n=sh(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),o=m(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let h=i.join("");tV(sp,`Creating RPC '${e}' stream ${n}: ${h}`,a);let u=s.createWebChannel(h,a);this.T_(u);let d=!1,f=!1,v=new sf({Ho:t=>{f?tV(sp,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(d||(tV(sp,`Opening RPC '${e}' stream ${n} transport.`),u.open(),d=!0),tV(sp,`RPC '${e}' stream ${n} sending:`,t),u.send(t))},Yo:()=>u.close()}),w=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return w(u,c.EventType.OPEN,()=>{f||(tV(sp,`RPC '${e}' stream ${n} transport opened.`),v.s_())}),w(u,c.EventType.CLOSE,()=>{f||(f=!0,tV(sp,`RPC '${e}' stream ${n} transport closed`),v.__(),this.I_(u))}),w(u,c.EventType.ERROR,t=>{f||(f=!0,tU(sp,`RPC '${e}' stream ${n} transport errored. Name:`,t.name,"Message:",t.message),v.__(new tG(tH.UNAVAILABLE,"The operation could not be completed")))}),w(u,c.EventType.MESSAGE,t=>{var r;if(!f){let i=t.data[0];tz(!!i,16349);let s=(null==i?void 0:i.error)||(null==(r=i[0])?void 0:r.error);if(s){tV(sp,`RPC '${e}' stream ${n} received error:`,s);let t=s.status,r=function(e){let t=E[e];if(void 0!==t)return n8(t)}(t),i=s.message;void 0===r&&(r=tH.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),f=!0,v.__(new tG(r,i)),u.close()}else tV(sp,`RPC '${e}' stream ${n} received:`,i),v.a_(i)}}),w(o,g.STAT_EVENT,t=>{t.stat===p.PROXY?tV(sp,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===p.NOPROXY&&tV(sp,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function sm(){return"undefined"!=typeof document?document:null}class sy{constructor(e,t,r=1e3,n=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=n,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),n=Math.max(0,t-r);n>0&&tV("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,n,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const sv="PersistentStream";class sw{constructor(e,t,r,n,i,s,o,a){this.Fi=e,this.w_=r,this.S_=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sy(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===tH.RESOURCE_EXHAUSTED?(tB(t.toString()),tB("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===tH.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.b_===t&&this.W_(e,r)},t=>{e(()=>{let e=new tG(tH.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{r(()=>this.G_(e))}),this.stream.onMessage(e=>{r(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return tV(sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(tV(sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sb extends sw{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let s="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:tq(39313,{state:n}),o=t.targetChange.targetIds||[],a=(i=t.targetChange.resumeToken,e.useProto3Json?(tz(void 0===i||"string"==typeof i,58123),rS.fromBase64String(i||"")):(tz(void 0===i||i instanceof e7||i instanceof Uint8Array,16193),rS.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;r=new il(s,o,a,l&&new tG(void 0===l.code?tH.UNKNOWN:n8(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=iT(e,n.document.name),s=iw(n.document.updateTime),o=n.document.createTime?iw(n.document.createTime):rh.min(),a=new r5({mapValue:{fields:n.document.fields}}),l=r4.newFoundDocument(i,s,o,a);r=new io(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=iT(e,n.document),s=n.readTime?iw(n.readTime):rh.min(),o=r4.newNoDocument(i,s);r=new io([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=iT(e,n.document);r=new io([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return tq(11601,{At:t});{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new n4(n,i);r=new ia(e.targetId,s)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return rh.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?rh.min():t.readTime?iw(t.readTime):rh.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=iI(this.serializer),t.addTarget=function(e,t){var r,n;let i,s=t.target;if((i=nv(s)?{documents:{documents:[i_(e,s.path)]}}:{query:function(e,t){var r,n;let i,s={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(i=o,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=i_(e,i);let a=function(e){if(0!==e.length)return function e(t){return t instanceof nr?function(e){if("=="===e.op){if(r0(e.value))return{unaryFilter:{field:iS(e.field),op:"IS_NAN"}};if(rZ(e.value))return{unaryFilter:{field:iS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(r0(e.value))return{unaryFilter:{field:iS(e.field),op:"IS_NOT_NAN"}};if(rZ(e.value))return{unaryFilter:{field:iS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iS(e.field),op:ig[e.op],value:e.value}}}(t):t instanceof nn?function(t){let r=t.getFilters().map(t=>e(t));return 1===r.length?r[0]:{compositeFilter:{op:im[t.op],filters:r}}}(t):tq(54877,{filter:t})}(nn.create(e,"and"))}(t.filters);a&&(s.structuredQuery.where=a);let l=function(e){if(0!==e.length)return e.map(e=>({field:iS(e.field),direction:ip[e.dir]}))}(t.orderBy);l&&(s.structuredQuery.orderBy=l);let h=iv(e,t.limit);return null!==h&&(s.structuredQuery.limit=h),t.startAt&&(s.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(s.structuredQuery.endAt={before:!(n=t.endAt).inclusive,values:n.position}),{Vt:s,parent:i}}(e,s).Vt}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r=t.resumeToken,i.resumeToken=e.useProto3Json?r.toBase64():r.toUint8Array();let n=iv(e,t.expectedCount);null!==n&&(i.expectedCount=n)}else if(t.snapshotVersion.compareTo(rh.min())>0){n=t.snapshotVersion.toTimestamp(),i.readTime=e.useProto3Json?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds};let r=iv(e,t.expectedCount);null!==r&&(i.expectedCount=r)}return i}(this.serializer,e);let r=function(e,t){let r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tq(28987,{purpose:e})}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=iI(this.serializer),t.removeTarget=e,this.k_(t)}}class sE{}class sT extends sE{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.ra=!1}ia(){if(this.ra)throw new tG(tH.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,n){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Wo(e,ib(t,r),n,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tG(tH.UNKNOWN,e.toString())})}Jo(e,t,r,n,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Jo(e,ib(t,r),n,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tH.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tG(tH.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class s_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(tB(t),this._a=!1):tV("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const sI="RemoteStore";class sC{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(e=>{r.enqueueAndForget(async()=>{sO(this)&&(tV(sI,"Restarting streams for network reachability change."),await async function(e){e.Ia.add(4),await sx(e),e.Aa.set("Unknown"),e.Ia.delete(4),await sS(e)}(this))})}),this.Aa=new s_(r,n)}}async function sS(e){if(sO(e))for(let t of e.da)await t(!0)}async function sx(e){for(let t of e.da)await t(!1)}function sA(e,t){e.Ta.has(t.targetId)||(e.Ta.set(t.targetId,t),sR(e)?sL(e):sq(e).x_()&&sk(e,t))}function sD(e,t){let r=sq(e);e.Ta.delete(t),r.x_()&&sN(e,t),0===e.Ta.size&&(r.x_()?r.B_():sO(e)&&e.Aa.set("Unknown"))}function sk(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rh.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}sq(e).H_(t)}function sN(e,t){e.Ra.$e(t),sq(e).Y_(t)}function sL(e){e.Ra=new iu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),sq(e).start(),e.Aa.aa()}function sR(e){return sO(e)&&!sq(e).M_()&&e.Ta.size>0}function sO(e){return 0===e.Ia.size}async function sM(e){e.Aa.set("Online")}async function sP(e){e.Ta.forEach((t,r)=>{sk(e,t)})}async function sF(e,t){e.Ra=void 0,sR(e)?(e.Aa.la(t),sL(e)):e.Aa.set("Unknown")}async function sV(e,t,r){if(e.Aa.set("Online"),t instanceof il&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.Ta.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.Ta.delete(n),e.Ra.removeTarget(n))}(e,t)}catch(r){tV(sI,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await sB(e,r)}else if(t instanceof io?e.Ra.Ye(t):t instanceof ia?e.Ra.it(t):e.Ra.et(t),!r.isEqual(rh.min()))try{let t=await se(e.localStore);r.compareTo(t)>=0&&await function(e,t){let r=e.Ra.Pt(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.Ta.get(n);i&&e.Ta.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.Ta.get(t);if(!n)return;e.Ta.set(t,n.withResumeToken(rS.EMPTY_BYTE_STRING,n.snapshotVersion)),sN(e,t);let i=new iD(n.target,t,r,n.sequenceNumber);sk(e,i)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){tV(sI,"Failed to raise snapshot:",t),await sB(e,t)}}async function sB(e,t,r){if(!rp(t))throw t;e.Ia.add(1),await sx(e),e.Aa.set("Offline"),r||(r=()=>se(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tV(sI,"Retrying IndexedDB access"),await r(),e.Ia.delete(1),await sS(e)})}async function sU(e,t){e.asyncQueue.verifyOperationInProgress(),tV(sI,"RemoteStore received new credentials");let r=sO(e);e.Ia.add(3),await sx(e),r&&e.Aa.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ia.delete(3),await sS(e)}async function sj(e,t){t?(e.Ia.delete(2),await sS(e)):t||(e.Ia.add(2),await sx(e),e.Aa.set("Unknown"))}function sq(e){var t,r,n;return e.Va||(t=e.datastore,r=e.asyncQueue,n={Zo:sM.bind(null,e),e_:sP.bind(null,e),n_:sF.bind(null,e),J_:sV.bind(null,e)},t.ia(),e.Va=new sb(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.da.push(async t=>{t?(e.Va.N_(),sR(e)?sL(e):e.Aa.set("Unknown")):(await e.Va.stop(),e.Ra=void 0)})),e.Va}class s${constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new tW,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new s$(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tG(tH.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sz(e,t){if(tB("AsyncQueue",`${t}: ${e}`),rp(e))return new tG(tH.UNAVAILABLE,`${t}: ${e}`);throw e}class sH{static emptySet(e){return new sH(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||rn.comparator(t.key,r.key):(e,t)=>rn.comparator(e.key,t.key),this.keyedMap=nL(),this.sortedSet=new rw(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sH)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new sH;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sG{constructor(){this.fa=new rw(rn.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?0!==e.type&&3===r.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==r.type?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.fa=this.fa.remove(t):1===e.type&&2===r.type?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):tq(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class sW{constructor(e,t,r,n,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new sW(e,t,sH.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class sK{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class sQ{constructor(){this.queries=sX(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){let r=e.queries;e.queries=sX(),r.forEach((e,r)=>{for(let e of r.wa)e.onError(t)})}(this,new tG(tH.ABORTED,"Firestore shutting down"))}}function sX(){return new nD(e=>nC(e),nI)}async function sY(e,t){let r=3,n=t.query,i=e.queries.get(n);i?!i.Sa()&&t.ba()&&(r=2):(i=new sK,r=+!t.ba());try{switch(r){case 0:i.ya=await e.onListen(n,!0);break;case 1:i.ya=await e.onListen(n,!1);break;case 2:await e.onFirstRemoteStoreListen(n)}}catch(r){let e=sz(r,`Initialization of query '${nS(t.query)}' failed`);return void t.onError(e)}e.queries.set(n,i),i.wa.push(t),t.va(e.onlineState),i.ya&&t.Ca(i.ya)&&s1(e)}async function sJ(e,t){let r=t.query,n=3,i=e.queries.get(r);if(i){let e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?n=+!t.ba():!i.Sa()&&t.ba()&&(n=2))}switch(n){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function sZ(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.wa)e.Ca(n)&&(r=!0);i.ya=n}}r&&s1(e)}function s0(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.wa)e.onError(r);e.queries.delete(t)}function s1(e){e.Da.forEach(e=>{e.next()})}(I=_||(_={})).Fa="default",I.Cache="cache";class s2{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new sW(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){return!(e.fromCache&&this.ba())||(!this.options.ka||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=sW.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==_.Cache}}class s6{constructor(e){this.key=e}}class s3{constructor(e){this.key=e}}class s5{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nM(),this.mutatedKeys=nM(),this.Xa=nA(e),this.eu=new sH(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new sG,n=t?t.eu:this.eu,i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1,a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let h=n.get(e),u=nx(this.query,t)?t:null,c=!!h&&this.mutatedKeys.has(h.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),f=!1;h&&u?h.data.isEqual(u.data)?c!==d&&(r.track({type:3,doc:u}),f=!0):this.iu(h,u)||(r.track({type:2,doc:u}),f=!0,(a&&this.Xa(u,a)>0||l&&0>this.Xa(u,l))&&(o=!0)):!h&&u?(r.track({type:0,doc:u}),f=!0):h&&!u&&(r.track({type:1,doc:h}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{eu:s,ru:r,Ds:o,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((e,t)=>(function(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tq(20277,{At:e})}};return r(e)-r(t)})(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(r),n=null!=n&&n;let o=t&&!n?this.ou():[],a=0===this.Za.size&&this.current&&!n?1:0,l=a!==this.Ya;return(this.Ya=a,0!==s.length||l)?{snapshot:new sW(this.query,e.eu,i,s,e.mutatedKeys,0===a,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new sG,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=nM(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});let t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new s3(e))}),this.Za.forEach(r=>{e.has(r)||t.push(new s6(r))}),t}uu(e){this.Ha=e.qs,this.Za=nM();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return sW.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const s4="SyncEngine";class s8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class s7{constructor(e){this.key=e,this.lu=!1}}class s9{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new nD(e=>nC(e),nI),this.Tu=new Map,this.Iu=new Set,this.du=new rw(rn.comparator),this.Eu=new Map,this.Au=new iK,this.Ru={},this.Vu=new Map,this.mu=iP.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function oe(e,t,r=!0){let n,i=om(e),s=i.Pu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.cu()):n=await or(i,t,r,!0),n}async function ot(e,t){let r=om(e);await or(r,t,!0,!1)}async function or(e,t,r,n){var i,s;let o,a=await (i=e.localStore,s=nT(t),i.persistence.runTransaction("Allocate target","readwrite",e=>{let t;return i.hi.getTargetData(e,s).next(r=>r?(t=r,rf.resolve(t)):i.hi.allocateTargetId(e).next(r=>(t=new iD(s,r,"TargetPurposeListen",e.currentSequenceNumber),i.hi.addTargetData(e,t).next(()=>t))))}).then(e=>{let t=i.Fs.get(e.targetId);return(null===t||e.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(i.Fs=i.Fs.insert(e.targetId,e),i.Ms.set(s,e.targetId)),e})),l=a.targetId,h=e.sharedClientState.addLocalQueryTarget(l,r);return n&&(o=await on(e,t,l,"current"===h,a.resumeToken)),e.isPrimaryClient&&r&&sA(e.remoteStore,a),o}async function on(e,t,r,n,i){e.gu=(t,r,n)=>(async function(e,t,r,n){let i=t.view.nu(r);i.Ds&&(i=await sr(e.localStore,t.query,!1).then(({documents:e})=>t.view.nu(e,i)));let s=n&&n.targetChanges.get(t.targetId),o=n&&null!=n.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return oc(e,t.targetId,a._u),a.snapshot})(e,t,r,n);let s=await sr(e.localStore,t,!0),o=new s5(t,s.qs),a=o.nu(s.documents),l=is.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),h=o.applyChanges(a,e.isPrimaryClient,l);oc(e,r,h._u);let u=new s8(t,r,o);return e.Pu.set(t,u),e.Tu.has(r)?e.Tu.get(r).push(t):e.Tu.set(r,[t]),h.snapshot}async function oi(e,t,r){let n=e.Pu.get(t),i=e.Tu.get(n.targetId);if(i.length>1)return e.Tu.set(n.targetId,i.filter(e=>!nI(e,t))),void e.Pu.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)||await st(e.localStore,n.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(n.targetId),r&&sD(e.remoteStore,n.targetId),oh(e,n.targetId)}).catch(rd)):(oh(e,n.targetId),await st(e.localStore,n.targetId,!0))}async function os(e,t){let r=e.Pu.get(t),n=e.Tu.get(r.targetId);e.isPrimaryClient&&1===n.length&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),sD(e.remoteStore,r.targetId))}async function oo(e,t){try{let r=await function(e,t){let r=t.snapshotVersion,n=e.Fs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{var s,o,a;let l,h,u=e.Os.newChangeBuffer({trackRemovals:!0});n=e.Fs;let c=[];t.targetChanges.forEach((s,o)=>{var a;let l=n.get(o);if(!l)return;c.push(e.hi.removeMatchingKeys(i,s.removedDocuments,o).next(()=>e.hi.addMatchingKeys(i,s.addedDocuments,o)));let h=l.withSequenceNumber(i.currentSequenceNumber);null!==t.targetMismatches.get(o)?h=h.withResumeToken(rS.EMPTY_BYTE_STRING,rh.min()).withLastLimboFreeSnapshotVersion(rh.min()):s.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(s.resumeToken,r)),n=n.insert(o,h),a=h,(0===l.resumeToken.approximateByteSize()||a.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&c.push(e.hi.updateTargetData(i,h))});let d=nk,f=nM();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(i,r))}),c.push((s=i,o=u,a=t.documentUpdates,l=nM(),h=nM(),a.forEach(e=>l=l.add(e)),o.getEntries(s,l).next(e=>{let t=nk;return a.forEach((r,n)=>{let i=e.get(r);n.isFoundDocument()!==i.isFoundDocument()&&(h=h.add(r)),n.isNoDocument()&&n.version.isEqual(rh.min())?(o.removeEntry(r,n.readTime),t=t.insert(r,n)):!i.isValidDocument()||n.version.compareTo(i.version)>0||0===n.version.compareTo(i.version)&&i.hasPendingWrites?(o.addEntry(n),t=t.insert(r,n)):tV(i8,"Ignoring outdated watch update for ",r,". Current version:",i.version," Watch version:",n.version)}),{Ls:t,ks:h}})).next(e=>{d=e.Ls,f=e.ks})),!r.isEqual(rh.min())){let t=e.hi.getLastRemoteSnapshotVersion(i).next(t=>e.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(t)}return rf.waitFor(c).next(()=>u.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,d,f)).next(()=>d)}).then(t=>(e.Fs=n,t))}(e.localStore,t);t.targetChanges.forEach((t,r)=>{let n=e.Eu.get(r);n&&(tz(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?n.lu=!0:t.modifiedDocuments.size>0?tz(n.lu,14607):t.removedDocuments.size>0&&(tz(n.lu,42227),n.lu=!1))}),await of(e,r,t)}catch(e){await rd(e)}}function oa(e,t,r){var n;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r,i=[];e.Pu.forEach((e,r)=>{let n=r.view.va(t);n.snapshot&&i.push(n.snapshot)}),(n=e.eventManager).onlineState=t,r=!1,n.queries.forEach((e,n)=>{for(let e of n.wa)e.va(t)&&(r=!0)}),r&&s1(n),i.length&&e.hu.J_(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function ol(e,t,r){e.sharedClientState.updateQueryState(t,"rejected",r);let n=e.Eu.get(t),i=n&&n.key;if(i){let r=new rw(rn.comparator);r=r.insert(i,r4.newNoDocument(i,rh.min()));let n=nM().add(i),s=new ii(rh.min(),new Map,new rw(t3),r,n);await oo(e,s),e.du=e.du.remove(i),e.Eu.delete(t),od(e)}else await st(e.localStore,t,!1).then(()=>oh(e,t,r)).catch(rd)}function oh(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.Tu.get(t)))e.Pu.delete(n),r&&e.hu.pu(n,r);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||ou(e,t)})}function ou(e,t){e.Iu.delete(t.path.canonicalString());let r=e.du.get(t);null!==r&&(sD(e.remoteStore,r),e.du=e.du.remove(t),e.Eu.delete(r),od(e))}function oc(e,t,r){for(let n of r)n instanceof s6?(e.Au.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Iu.has(n)||(tV(s4,"New document in limbo: "+r),e.Iu.add(n),od(e))}(e,n)):n instanceof s3?(tV(s4,"Document no longer in limbo: "+n.key),e.Au.removeReference(n.key,t),e.Au.containsKey(n.key)||ou(e,n.key)):tq(19791,{yu:n})}function od(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Iu.values().next().value;e.Iu.delete(t);let r=new rn(re.fromString(t)),n=e.mu.next();e.Eu.set(n,new s7(r)),e.du=e.du.insert(r,n),sA(e.remoteStore,new iD(nT(new nw(r.path)),n,"TargetPurposeLimboResolution",rg.ue))}}async function of(e,t,r){let n=[],i=[],s=[];e.Pu.isEmpty()||(e.Pu.forEach((o,a)=>{s.push(e.gu(a,t,r).then(t=>{var s;if((t||r)&&e.isPrimaryClient){let n=t?!t.fromCache:null==(s=null==r?void 0:r.targetChanges.get(a.targetId))?void 0:s.current;e.sharedClientState.updateQueryState(a.targetId,n?"current":"not-current")}if(t){n.push(t);let e=i3.Es(a.targetId,t);i.push(e)}}))}),await Promise.all(s),e.hu.J_(n),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>rf.forEach(t,t=>rf.forEach(t.Is,n=>e.persistence.referenceDelegate.addReference(r,t.targetId,n)).next(()=>rf.forEach(t.ds,n=>e.persistence.referenceDelegate.removeReference(r,t.targetId,n)))))}catch(e){if(!rp(e))throw e;tV(i8,"Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.Fs.get(t),n=r.snapshotVersion,i=r.withLastLimboFreeSnapshotVersion(n);e.Fs=e.Fs.insert(t,i)}}}(e.localStore,i))}async function op(e,t){if(!e.currentUser.isEqual(t)){tV(s4,"User change. New user:",t.toKey());let r=await i9(e.localStore,t);e.currentUser=t,e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new tG(tH.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Vu.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await of(e,r.Bs)}}function og(e,t){let r=e.Eu.get(t);if(r&&r.lu)return nM().add(r.key);{let r=nM(),n=e.Tu.get(t);if(!n)return r;for(let t of n){let n=e.Pu.get(t);r=r.unionWith(n.view.tu)}return r}}function om(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=oo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=og.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ol.bind(null,e),e.hu.J_=sZ.bind(null,e.eventManager),e.hu.pu=s0.bind(null,e.eventManager),e}class oy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=new iy(e.databaseInfo.databaseId,!0),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){var t,r;return t=this.persistence,r=new i4,new i7(t,r,e.initialUser,this.serializer)}Du(e){return new i0(i2.Vi,this.serializer)}bu(e){return new si}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oy.provider={build:()=>new oy};class ov extends oy{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){return tz(this.persistence.referenceDelegate instanceof i6,46915),new iU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Du(e){let t=void 0!==this.cacheSizeBytes?iM.withCacheSize(this.cacheSizeBytes):iM.DEFAULT;return new i0(e=>i6.Vi(e,t),this.serializer)}}class ow{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>oa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=op.bind(null,this.syncEngine),await sj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new sQ}createDatastore(e){var t;let r=new iy(e.databaseInfo.databaseId,!0),n=new sg(e.databaseInfo);return t=e.authCredentials,new sT(t,e.appCheckCredentials,n,r)}createRemoteStore(e){var t,r;return t=this.localStore,r=this.datastore,new sC(t,r,e.asyncQueue,e=>oa(this.syncEngine,e,0),sa.C()?new sa:new ss)}createSyncEngine(e,t){return function(e,t,r,n,i,s,o){let a=new s9(e,t,r,n,i,s);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){tV(sI,"RemoteStore shutting down."),e.Ia.add(5),await sx(e),e.Ea.shutdown(),e.Aa.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}ow.provider={build:()=>new ow};class ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):tB("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const oE="FirestoreClient";class oT{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=tO.UNAUTHENTICATED,this.clientId=t6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{tV(oE,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(tV(oE,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new tW;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=sz(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function o_(e,t){e.asyncQueue.verifyOperationInProgress(),tV(oE,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await i9(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>{tU("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{tV("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{tU("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function oI(e,t){e.asyncQueue.verifyOperationInProgress();let r=await oC(e);tV(oE,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>sU(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>sU(t.remoteStore,r)),e._onlineComponents=t}async function oC(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tV(oE,"Using user provided OfflineComponentProvider");try{await o_(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===tH.FAILED_PRECONDITION||t.code===tH.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;tU("Error using user provided cache. Falling back to memory cache: "+t),await o_(e,new oy)}}else tV(oE,"Using default OfflineComponentProvider"),await o_(e,new ov(void 0));return e._offlineComponents}async function oS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tV(oE,"Using user provided OnlineComponentProvider"),await oI(e,e._uninitializedComponentsProvider._online)):(tV(oE,"Using default OnlineComponentProvider"),await oI(e,new ow))),e._onlineComponents}async function ox(e){let t=await oS(e),r=t.eventManager;return r.onListen=oe.bind(null,t.syncEngine),r.onUnlisten=oi.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=ot.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=os.bind(null,t.syncEngine),r}function oA(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const oD=new Map,ok="firestore.googleapis.com";class oN{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new tG(tH.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ok,this.ssl=!0}else this.host=e.host,this.ssl=null==(t=e.ssl)||t;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tG(tH.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new tG(tH.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oA(null!=(r=e.experimentalLongPollingOptions)?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tG(tH.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new tG(tH.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new tG(tH.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oL{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tG(tH.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tG(tH.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oN(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tQ;switch(e.type){case"firstParty":return new tZ(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tG(tH.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=oD.get(e);t&&(tV("ComponentProvider","Removing Datastore"),oD.delete(e),t.terminate())}(this),Promise.resolve()}}class oR{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oR(this.firestore,e,this._query)}}class oO{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oM(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oO(this.firestore,e,this._key)}toJSON(){return{type:oO._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ra(t,oO._jsonSchema))return new oO(e,r||null,new rn(re.fromString(t.referencePath)))}}oO._jsonSchemaVersion="firestore/documentReference/1.0",oO._jsonSchema={type:ro("string",oO._jsonSchemaVersion),referencePath:ro("string")};class oM extends oR{constructor(e,t,r){super(e,t,new nw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new oO(this.firestore,null,new rn(e))}withConverter(e){return new oM(this.firestore,e,this._path)}}const oP="AsyncQueue";class oF{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sy(this,"async_queue_retry"),this.oc=()=>{let e=sm();e&&tV(oP,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;let t=sm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=sm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new tW;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!rp(e))throw e;tV(oP,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,tB("INTERNAL UNHANDLED ERROR: ",oV(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let n=s$.createAndSchedule(this,e,t,r,e=>this.lc(e));return this.ec.push(n),n}ac(){this.tc&&tq(47125,{hc:oV(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{for(let t of(this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.ec))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}}function oV(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class oB extends oL{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new oF,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new oF(e),this._firestoreClient=void 0,await e}}}class oU{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oU(rS.fromBase64String(e))}catch(e){throw new tG(tH.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new oU(rS.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oU._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,oU._jsonSchema))return oU.fromBase64String(e.bytes)}}oU._jsonSchemaVersion="firestore/bytes/1.0",oU._jsonSchema={type:ro("string",oU._jsonSchemaVersion),bytes:ro("string")};class oj{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tG(tH.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oq{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tG(tH.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tG(tH.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return t3(this._lat,e._lat)||t3(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oq._jsonSchemaVersion}}static fromJSON(e){if(ra(e,oq._jsonSchema))return new oq(e.latitude,e.longitude)}}oq._jsonSchemaVersion="firestore/geoPoint/1.0",oq._jsonSchema={type:ro("string",oq._jsonSchemaVersion),latitude:ro("number"),longitude:ro("number")};class o${constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:o$._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,o$._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new o$(e.vectorValues);throw new tG(tH.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}o$._jsonSchemaVersion="firestore/vectorValue/1.0",o$._jsonSchema={type:ro("string",o$._jsonSchemaVersion),vectorValues:ro("object")};const oz=RegExp("[~\\*/\\[\\]]");function oH(e,t,r,n,i){let s=n&&!n.isEmpty(),o=void 0!==i,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new tG(tH.INVALID_ARGUMENT,a+e+l)}class oG{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new oO(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new oW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(oK("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oW extends oG{data(){return super.data()}}function oK(e,t){return"string"==typeof t?function(e,t,r){if(t.search(oz)>=0)throw oH(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,void 0);try{return new oj(...t.split("."))._internalPath}catch(r){throw oH(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,void 0)}}(e,t):t instanceof oj?t._internalPath:t._delegate._internalPath}class oQ{convertValue(e,t="none"){switch(rz(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rD(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tq(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return rv(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new o$(null==(n=null==(r=null==(t=e.fields)?void 0:t[r$].arrayValue)?void 0:r.values)?void 0:n.map(e=>rD(e.doubleValue)))}convertGeoPoint(e){return new oq(rD(e.latitude),rD(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rP(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rF(e));default:return null}}convertTimestamp(e){let t=rA(e);return new rl(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=re.fromString(e);tz(iA(r),9688,{name:e});let n=new rU(r.get(1),r.get(3)),i=new rn(r.popFirst(5));return n.isEqual(t)||tB(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class oX{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oY extends oG{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oJ(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(oK("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tG(tH.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=oY._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}oY._jsonSchemaVersion="firestore/documentSnapshot/1.0",oY._jsonSchema={type:ro("string",oY._jsonSchemaVersion),bundleSource:ro("string","DocumentSnapshot"),bundleName:ro("string"),bundle:ro("string")};class oJ extends oY{data(e={}){return super.data(e)}}class oZ{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new oX(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oJ(this._firestore,this._userDataWriter,r.key,r,new oX(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tG(tH.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new oJ(e._firestore,e._userDataWriter,r.doc.key,r.doc,new oX(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new oJ(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oX(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tq(61501,{type:e})}}(t.type),doc:n,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tG(tH.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=oZ._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=t6.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],n=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),n.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}oZ._jsonSchemaVersion="firestore/querySnapshot/1.0",oZ._jsonSchema={type:ro("string",oZ._jsonSchemaVersion),bundleSource:ro("string","QuerySnapshot"),bundleName:ro("string"),bundle:ro("string")};class o0 extends oQ{constructor(e){super(),this.firestore=e}convertBytes(e){return new oU(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new oO(this.firestore,null,t)}}new WeakMap,function(e=!0){tM="11.10.0",eM(new er("firestore",(t,{instanceIdentifier:r,options:n})=>{let i=t.getProvider("app").getImmediate(),s=new oB(new tY(t.getProvider("auth-internal")),new t1(i,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tG(tH.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rU(e.options.projectId,t)}(i,r),i);return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),eB(tL,tR,void 0),eB(tL,tR,"esm2017")}();const o1=function(e,t){let r=(function(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)})("object"==typeof e?e:function(e=eD){let t=eN.get(e);if(!t&&e===eD&&H())return eV();if(!t)throw eP.create("no-app",{appName:e});return t}(),"firestore").getImmediate({identifier:"string"==typeof e?e:rB});if(!r._initialized){let e=z("firestore");e&&function(e,t,r,n={}){var i;e=rs(e,oL);let s=W(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${r}`;s&&(K(`https://${l}`),function(e,t){if("undefined"==typeof window||"undefined"==typeof document||!W(window.location.host)||Q[e]===t||Q[e]||X)return;function r(e){return`__firebase__banner__${e}`}Q[e]=t;let n="__firebase__banner",i=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(Q))Q[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(n),t=!1,e||((e=document.createElement("div")).setAttribute("id",n),t=!0),{created:t,element:e}),o=r("text"),a=document.getElementById(o)||document.createElement("span"),l=r("learnmore"),h=document.getElementById(l)||document.createElement("a"),u=r("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e=s.element;e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center",h.setAttribute("id",l),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline";let t=function(){let e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{X=!0;let e=document.getElementById(n);e&&e.remove()},e}();c.setAttribute("width","24"),c.setAttribute("id",u),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px",e.append(c,a,h,t),document.body.appendChild(e)}i?(a.innerText="Preview backend disconnected.",c.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(c.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText="Preview backend running in this workspace."),a.setAttribute("id",o)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}("Firestore",!0)),o.host!==ok&&o.host!==l&&tU("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:n});if(!ee(h,a)&&(e._setSettings(h),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=tO.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[F(JSON.stringify({alg:"none",type:"JWT"})),F(JSON.stringify(s)),""].join(".")}(n.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new tG(tH.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new tO(s)}e._authCredentials=new tX(new tK(t,r))}}(r,...e)}return r}(eV({apiKey:"AIzaSyA5aDGFwVaziMI2WOVx_SuJr2yg7ojnKCk",authDomain:"language-d157c.firebaseapp.com",projectId:"language-d157c",storageBucket:"language-d157c.firebasestorage.app",messagingSenderId:"135792918299",appId:"1:135792918299:web:3c70fe51b0a79645c05dbe"}));async function o2(e){let t=[];try{(await function(e){e=rs(e,oR);let t=rs(e.firestore,oB),r=function(e){if(e._terminated)throw new tG(tH.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,r,n,i,s,o;let a=e._freezeSettings(),l=(i=e._databaseId,s=(null==(t=e._app)?void 0:t.options.appId)||"",o=e._persistenceKey,new rV(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,oA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator));e._componentsProvider||(null==(r=a.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=a.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new oT(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}(t),n=new o0(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tG(tH.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),(function(e,t,r={}){let n=new tW;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,i){let s=new ob({next:r=>{s.Ou(),t.enqueueAndForget(()=>sJ(e,o)),r.fromCache&&"server"===n.source?i.reject(new tG(tH.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),o=new s2(r,s,{includeMetadataChanges:!0,ka:!0});return sY(e,o)})(await ox(e),e.asyncQueue,t,r,n)),n.promise})(r,e._query).then(r=>new oZ(t,n,e,r))}(function(e,t,...r){var n;if(e=(n=e)&&n._delegate?n._delegate:n,function(e,t,r){if(!r)throw new tG(tH.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}("collection","path",t),e instanceof oL){let n=re.fromString(t,...r);return ri(n),new oM(e,null,n)}{if(!(e instanceof oO||e instanceof oM))throw new tG(tH.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(re.fromString(t,...r));return ri(n),new oM(e.firestore,null,n)}}(o1,e))).forEach(e=>t.push({id:e.id,...e.data()}))}catch(e){console.error(e)}return t}async function o6(e,t){D.storage=new S(e),D.dictionary=new x(await o2(t)),D.lang=t,D.wordExtraInfoModal=new A(".word-extra-info-modal",".close-button"),D.langs={en:"English",pl:"Polish"},D.filters={dictionary:{},trainWords:{}},D.dictionary.setFavorites(!0,...D.storage.getItem()||[]),D.dictionary.types.forEach((e,t)=>{for(let r in D.filters)D.filters[r][e]={used:!1,expression:D.dictionary.types_expression[t]}})}function o3(e,t){let r=0;return function(...n){let i=Date.now();i-r>=t&&(e.apply(this,n),r=i)}}function o5(e,t=0,r=()=>{}){if(!e)return document.createElement("div");let{id:n,type:i,expression:s,type_expression:o}=e,a=document.createElement("button");a.classList.add("word-button"),a.classList.add("app-button"),a.dataset.id=n;let l=document.createElement("span");l.classList.add("index"),l.innerText=t;let h=document.createElement("span");h.classList.add("expression"),h.innerText=s;let u=document.createElement("span");if(u.classList.add("type"),u.classList.add(i),u.innerText=o,a.appendChild(l),a.appendChild(h),D.dictionary.getById(n).favorite){let e=document.createElement("span");e.classList.add("favorite"),e.innerText="",a.appendChild(e)}return a.appendChild(u),r(a),a}let o4=0;function o8(e,t=()=>{}){let r=document.createElement("div");r.classList.add("sub-container");let n=document.createElement("button");n.classList.add("filter-open-close-button"),n.innerHTML=`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      fill="var(--color-2)"
      height="15px"
      width="15px"
      version="1.1"
      id="Layer_1"
      viewBox="0 0 330 330"
      xml:space="preserve"
    >
      <path
        id="XMLID_224_"
        d="M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394  l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393  C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z"
      />
    </svg>Filters`;let i=document.createElement("div");i.classList.add("filter-list-des-box"),i.classList.add("hidden");let s=document.createElement("div");s.classList.add("sub-container");let o=document.createElement("ul");for(let t in o.classList.add("app-list"),o.classList.add("flex-container"),o.classList.add("filter-list"),e){let r=document.createElement("li"),n=t+o4,i=document.createElement("label");i.classList.add(t),i.classList.add("app-button"),i.setAttribute("for",n),i.innerText+=e[t].expression+" ";let s=document.createElement("input");s.type="checkbox",s.checked=!0,s.id=n,s.name=t,r.appendChild(s),r.appendChild(i),o.appendChild(r)}let a=document.createElement("button");a.classList.add("app-button"),a.innerText="Toggle All";let l=o.querySelectorAll("input[type='checkbox']");l.forEach(r=>{e[r.name].used=r.checked,r.addEventListener("change",r=>{e[r.target.name].used=r.target.checked,t()})});let h=!0;return a.addEventListener("click",()=>{l.forEach(t=>{e[t.name].used=!h,t.checked=!h}),h=!h,t()}),n.addEventListener("click",()=>{i.classList.toggle("hidden"),n.classList.toggle("active")}),r.appendChild(n),r.appendChild(i),s.appendChild(o),s.appendChild(a),i.appendChild(s),o4++,r}function o7(e=""){let t=[...new Set(e.split(",").map(e=>{let t=D.dictionary.getWordsByPart(e.trimLeft()),r=D.dictionary.getWordsByTypes(t,...Object.keys(D.filters.dictionary).map(e=>D.filters.dictionary[e].used&&`${e}`)),n=0!==r.length?r:D.dictionary.getFavorites();return D.filters.dictionary.favorite.used||(n=n.filter(({favorite:e})=>!e)),n}).flat())],r=D.dictionary.getSorted(t);k.dictionary.listElement.innerHTML="",r.map((e,t)=>{let r=document.createElement("li");return r.appendChild(o5(e,t+1)),r}).forEach(e=>k.dictionary.listElement.appendChild(e)),k.wordsCountEl.innerHTML=r.length}const o9=(e,t,r)=>`
You are a language teacher of ${r}. You have to give examples of the word "${e}" as ${t} in different natural contexts.
Give me 5 sentences using the word "${e}" in different contexts. Tell them without greeting and formatting. An html list ul. Just straight like this:
<ul class="app-list ai-list">
    <li>1. First example</li>
    <li>2. Second example</li>
    <li>3. Third example</li>
</ul>
`,ae=(e,t)=>`
You are a language teacher of ${t}. You have to review the essay and give me feedback in ${t}.
The essay is: "${e}".Tell them without greeting and formatting. 
Just straight like this but write there everything in ${t}: 
<p>Rate: from 0 to 10</p>
<p>Level of ${t}: from A1 to C2</p>
<p>Review: your review about text</p>
<p>Mistakes: write about my mistakes if such exist</p>
<p>What to improve: what should i improve not to make such mistakes next time.</p>
`;let at=[];function ar(e){k.trainWords.randomWordElement.innerHTML="",k.trainWords.randomWordElement.appendChild(o5(e))}function an(){let e=D.dictionary.getWordsByTypes(D.dictionary.d,...Object.keys(D.filters.trainWords).map(e=>D.filters.trainWords[e]&&`${e}`));at=0!==e.length?e:D.dictionary.getFavorites(),D.filters.dictionary.favorite||(at=at.filter(({favorite:e})=>!e)),r=0,at.length>0?(at.sort(()=>.5-Math.random()),i=at[r].translation.toLowerCase(),k.trainWords.wordsElement.innerHTML=at.length,k.trainWords.currentIndexElement.innerHTML=r+1,ar(at[r])):(k.trainWords.wordsElement.innerHTML=0,k.trainWords.currentIndexElement.innerHTML=0,k.trainWords.randomWordElement.innerHTML="No words found")}function ai(){k.dictionary.filters.innerHTML="",k.trainWords.filtersElement.innerHTML="",k.dictionary.filters.appendChild(o8(D.filters.dictionary,()=>o7(k.dictionary.searchInput.value))),k.trainWords.filtersElement.appendChild(o8(D.filters.trainWords,()=>an())),o7();let e=document.querySelector(".train-word-form"),t=document.querySelector(".train-word-input");an(),t.addEventListener("input",o3(()=>{n=t.value.trim().toLowerCase(),i===n?t.style.border="2px solid green":t.style.border="2px solid red"},50)),e.addEventListener("submit",e=>{e.preventDefault(),n===i&&(ar((r=(r+1)%at.length,k.trainWords.currentIndexElement.innerHTML=r+1,at[r])),t.style.border="2px solid",t.value="",i=at[r].translation.toLowerCase())})}function as(){let e=k.wordExtraInfoModal.addFavoriteWordButton.dataset.wordId;D.dictionary.getById(e).favorite?(D.dictionary.setFavoriteById(e,!1),D.storage.setItem(D.storage.getItem().filter(({fId:t})=>e===t)),k.wordExtraInfoModal.addFavoriteWordButton.innerHTML="Add to Favorite"):(D.dictionary.setFavoriteById(e,!0),D.storage.setItem([...D.storage.getItem()||[],e]),k.wordExtraInfoModal.addFavoriteWordButton.innerHTML="Remove from Favorite"),o7()}function ao(e){o7(e.target.value)}function aa(e){e.preventDefault();let t=ae(k.writingTraining.textForm.train_writing_text_textarea.value,D.langs[D.lang]);k.writingTraining.textAiReview.innerHTML="Loading...",k.writingTraining.textForm.submit.disabled=!0,ad(t).then(e=>{k.writingTraining.textAiReview.innerHTML=e.message.content,k.writingTraining.textForm.submit.disabled=!1})}function al(){k.writingTraining.textTotalWords.innerText=k.writingTraining.textTextArea.value.trim().split(" ").length}function ah(){if(this.checked){let e=this.dataset.lang;D.prefLanguage.setItem(e),o6(`favorite${e[0].toUpperCase()+e.split("").splice(1).join("")}Words`,e).then(ai)}}function au(e){let t=D.dictionary.getById(e.id).favorite;k.wordExtraInfoModal.aiTextGenerationButton.dataset.id=e.id,k.wordExtraInfoModal.addFavoriteWordButton.dataset.wordId=e.id,k.wordExtraInfoModal.addFavoriteWordButton.innerText=t?"Remove from Favorite":"Add to Favorite",k.wordExtraInfoModal.word.innerText=e.expression,k.wordExtraInfoModal.type.innerText=e.type,k.wordExtraInfoModal.type.classList.add(e.type),k.wordExtraInfoModal.wordId.innerText=e.id,k.wordExtraInfoModal.translation.innerText=e.translation,k.wordExtraInfoModal.description.innerText=e.description,k.wordExtraInfoModal.aiGeneratedText.innerHTML=""}function ac(e){if(e.target.closest(".word-button")){let t=e.target.closest(".word-button").dataset.id,r=D.dictionary.getById(t);D.wordExtraInfoModal.showModalWindow(au.bind(null,r))}else if(e.target.closest(".link-button")){let t=e.target.closest(".link-button");k.allLinkButtons.forEach(e=>e.classList.remove("active")),t.classList.add("active")}}function ad(e){return puter.ai.chat(e)}async function af(){k.trainWords={wordsElement:document.querySelector(".train-word-allWords"),currentIndexElement:document.querySelector(".train-word-currentIndex"),randomWordElement:document.querySelector(".train-word-random-word"),filtersElement:document.querySelector(".train-words-filters")},k.writingTraining={textForm:document.querySelector(".train-writing-text-form"),textAiReview:document.querySelector(".train-writing-text-ai-review"),textTotalWords:document.querySelector(".train-writing-text-total-words"),textTextArea:document.querySelector(".train-writing-text-textarea")},k.wordExtraInfoModal={addFavoriteWordButton:document.querySelector(".word-extra-info-modal .add-word-favorite"),word:document.querySelector(".word-extra-info-modal .word"),type:document.querySelector(".word-extra-info-modal .type"),wordId:document.querySelector(".word-extra-info-modal .word-id"),translation:document.querySelector(".word-extra-info-modal .translation"),description:document.querySelector(".word-extra-info-modal .description"),aiGeneratedText:document.querySelector(".word-extra-info-modal .ai-generated-text"),aiTextGenerationButton:document.querySelector(".word-extra-info-modal .ai-text-generation-button")},k.dictionary={listElement:document.querySelector(".dictionary-list"),filters:document.querySelector(".dictionary-filters"),searchInput:document.querySelector(".dictionary-input")},k.wordsCountEl=document.querySelector(".words-count"),k.langSwitchers=document.querySelectorAll(".lang-radio-switcher"),k.allLinkButtons=document.querySelectorAll(".link-button"),D.prefLanguage=new S("pref-lang");let e=D.prefLanguage.getItem("pl");k.langSwitchers.forEach(t=>{t.dataset.lang===e&&(t.checked=!0)}),await o6(`favorite${e[0].toUpperCase()+e.split("").splice(1).join("")}Words`,e),k.wordExtraInfoModal.addFavoriteWordButton.addEventListener("click",as),k.dictionary.searchInput.addEventListener("input",o3(ao,100)),k.writingTraining.textForm.addEventListener("submit",aa),window.addEventListener("click",ac),k.langSwitchers.forEach(e=>e.addEventListener("change",ah)),k.writingTraining.textTextArea.addEventListener("input",al),k.wordExtraInfoModal.aiTextGenerationButton.addEventListener("click",({currentTarget:e})=>{let{expression:t,type:r}=D.dictionary.getById(e.dataset.id),n=o9(t,r,D.langs[D.lang]);k.wordExtraInfoModal.aiGeneratedText.innerHTML="Loading...",k.wordExtraInfoModal.aiTextGenerationButton.disabled=!0,ad(n).then(e=>{k.wordExtraInfoModal.aiGeneratedText.innerHTML=e.message.content,k.wordExtraInfoModal.aiTextGenerationButton.disabled=!1})})}window.addEventListener("load",function(){af().then(ai)});
//# sourceMappingURL=language-app.7af817bf.js.map
